var _e=Object.defineProperty;var ye=(h,e,t)=>e in h?_e(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var Zt=(h,e,t)=>(ye(h,typeof e!="symbol"?e+"":e,t),t);import{c as Nt,a as be,f as we,l as ve,p as ke,_ as yt,G as Xt}from"./deckgl_layers-f7f5f030.js";import{G as xe}from"./deckgl_gmap-df74a418.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function Lt(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ae={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(h,e){(function(t){h.exports=t()})(function(){return function t(i,a,s){function o(d,y){if(!a[d]){if(!i[d]){var b=typeof Lt=="function"&&Lt;if(!y&&b)return b(d,!0);if(n)return n(d,!0);var w=new Error("Cannot find module '"+d+"'");throw w.code="MODULE_NOT_FOUND",w}var c=a[d]={exports:{}};i[d][0].call(c.exports,function(m){var f=i[d][1][m];return o(f||m)},c,c.exports,t,i,a,s)}return a[d].exports}for(var n=typeof Lt=="function"&&Lt,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(t,i,a){var s=t("./utils"),o=t("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var d,y,b,w,c,m,f,g=[],p=0,k=u.length,x=k,C=s.getTypeOf(u)!=="string";p<u.length;)x=k-p,b=C?(d=u[p++],y=p<k?u[p++]:0,p<k?u[p++]:0):(d=u.charCodeAt(p++),y=p<k?u.charCodeAt(p++):0,p<k?u.charCodeAt(p++):0),w=d>>2,c=(3&d)<<4|y>>4,m=1<x?(15&y)<<2|b>>6:64,f=2<x?63&b:64,g.push(n.charAt(w)+n.charAt(c)+n.charAt(m)+n.charAt(f));return g.join("")},a.decode=function(u){var d,y,b,w,c,m,f=0,g=0,p="data:";if(u.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var k,x=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===n.charAt(64)&&x--,u.charAt(u.length-2)===n.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=o.uint8array?new Uint8Array(0|x):new Array(0|x);f<u.length;)d=n.indexOf(u.charAt(f++))<<2|(w=n.indexOf(u.charAt(f++)))>>4,y=(15&w)<<4|(c=n.indexOf(u.charAt(f++)))>>2,b=(3&c)<<6|(m=n.indexOf(u.charAt(f++))),k[g++]=d,c!==64&&(k[g++]=y),m!==64&&(k[g++]=b);return k}},{"./support":30,"./utils":32}],2:[function(t,i,a){var s=t("./external"),o=t("./stream/DataWorker"),n=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(y,b,w,c,m){this.compressedSize=y,this.uncompressedSize=b,this.crc32=w,this.compression=c,this.compressedContent=m}d.prototype={getContentWorker:function(){var y=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),b=this;return y.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(y,b,w){return y.pipe(new n).pipe(new u("uncompressedSize")).pipe(b.compressWorker(w)).pipe(new u("compressedSize")).withStreamInfo("compression",b)},i.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,a){var s=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,a){var s=t("./utils"),o=function(){for(var n,u=[],d=0;d<256;d++){n=d;for(var y=0;y<8;y++)n=1&n?3988292384^n>>>1:n>>>1;u[d]=n}return u}();i.exports=function(n,u){return n!==void 0&&n.length?s.getTypeOf(n)!=="string"?function(d,y,b,w){var c=o,m=w+b;d^=-1;for(var f=w;f<m;f++)d=d>>>8^c[255&(d^y[f])];return-1^d}(0|u,n,n.length,0):function(d,y,b,w){var c=o,m=w+b;d^=-1;for(var f=w;f<m;f++)d=d>>>8^c[255&(d^y.charCodeAt(f))];return-1^d}(0|u,n,n.length,0):0}},{"./utils":32}],5:[function(t,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,i,a){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),n=t("./utils"),u=t("./stream/GenericWorker"),d=s?"uint8array":"array";function y(b,w){u.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=w,this.meta={}}a.magic="\b\0",n.inherits(y,u),y.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(d,b.data),!1)},y.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(w){b.push({data:w,meta:b.meta})}},a.compressWorker=function(b){return new y("Deflate",b)},a.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,a){function s(c,m){var f,g="";for(f=0;f<m;f++)g+=String.fromCharCode(255&c),c>>>=8;return g}function o(c,m,f,g,p,k){var x,C,S=c.file,L=c.compression,R=k!==d.utf8encode,T=n.transformTo("string",k(S.name)),B=n.transformTo("string",d.utf8encode(S.name)),H=S.comment,Q=n.transformTo("string",k(H)),E=n.transformTo("string",d.utf8encode(H)),N=B.length!==S.name.length,l=E.length!==H.length,U="",et="",Z="",rt=S.dir,W=S.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};m&&!f||(tt.crc32=c.crc32,tt.compressedSize=c.compressedSize,tt.uncompressedSize=c.uncompressedSize);var z=0;m&&(z|=8),R||!N&&!l||(z|=2048);var O=0,q=0;rt&&(O|=16),p==="UNIX"?(q=798,O|=function(V,ht){var ft=V;return V||(ft=ht?16893:33204),(65535&ft)<<16}(S.unixPermissions,rt)):(q=20,O|=function(V){return 63&(V||0)}(S.dosPermissions)),x=W.getUTCHours(),x<<=6,x|=W.getUTCMinutes(),x<<=5,x|=W.getUTCSeconds()/2,C=W.getUTCFullYear()-1980,C<<=4,C|=W.getUTCMonth()+1,C<<=5,C|=W.getUTCDate(),N&&(et=s(1,1)+s(y(T),4)+B,U+="up"+s(et.length,2)+et),l&&(Z=s(1,1)+s(y(Q),4)+E,U+="uc"+s(Z.length,2)+Z);var J="";return J+=`
\0`,J+=s(z,2),J+=L.magic,J+=s(x,2),J+=s(C,2),J+=s(tt.crc32,4),J+=s(tt.compressedSize,4),J+=s(tt.uncompressedSize,4),J+=s(T.length,2),J+=s(U.length,2),{fileRecord:b.LOCAL_FILE_HEADER+J+T+U,dirRecord:b.CENTRAL_FILE_HEADER+s(q,2)+J+s(Q.length,2)+"\0\0\0\0"+s(O,4)+s(g,4)+T+U+Q}}var n=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),y=t("../crc32"),b=t("../signature");function w(c,m,f,g){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=f,this.encodeFileName=g,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(w,u),w.prototype.push=function(c){var m=c.meta.percent||0,f=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,u.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:f?(m+100*(f-g-1))/f:100}}))},w.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var m=this.streamFiles&&!c.file.dir;if(m){var f=o(c,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(c){this.accumulate=!1;var m=this.streamFiles&&!c.file.dir,f=o(c,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),m)this.push({data:function(g){return b.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var c=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var f=this.bytesWritten-c,g=function(p,k,x,C,S){var L=n.transformTo("string",S(C));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(k,4)+s(x,4)+s(L.length,2)+L}(this.dirRecords.length,f,c,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(c){this._sources.push(c);var m=this;return c.on("data",function(f){m.processChunk(f)}),c.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),c.on("error",function(f){m.error(f)}),this},w.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(c){var m=this._sources;if(!u.prototype.error.call(this,c))return!1;for(var f=0;f<m.length;f++)try{m[f].error(c)}catch{}return!0},w.prototype.lock=function(){u.prototype.lock.call(this);for(var c=this._sources,m=0;m<c.length;m++)c[m].lock()},i.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,a){var s=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(n,u,d){var y=new o(u.streamFiles,d,u.platform,u.encodeFileName),b=0;try{n.forEach(function(w,c){b++;var m=function(k,x){var C=k||x,S=s[C];if(!S)throw new Error(C+" is not a valid compression method !");return S}(c.options.compression,u.compression),f=c.options.compressionOptions||u.compressionOptions||{},g=c.dir,p=c.date;c._compressWorker(m,f).withStreamInfo("file",{name:w,dir:g,date:p,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(y)}),y.entriesCount=b}catch(w){y.error(w)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,a){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var n in this)typeof this[n]!="function"&&(o[n]=this[n]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,n){return new s().loadAsync(o,n)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,a){var s=t("./utils"),o=t("./external"),n=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),y=t("./nodejsUtils");function b(w){return new o.Promise(function(c,m){var f=w.decompressed.getContentWorker().pipe(new d);f.on("error",function(g){m(g)}).on("end",function(){f.streamInfo.crc32!==w.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}i.exports=function(w,c){var m=this;return c=s.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),y.isNode&&y.isStream(w)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",w,!0,c.optimizedBinaryString,c.base64).then(function(f){var g=new u(c);return g.load(f),g}).then(function(f){var g=[o.Promise.resolve(f)],p=f.files;if(c.checkCRC32)for(var k=0;k<p.length;k++)g.push(b(p[k]));return o.Promise.all(g)}).then(function(f){for(var g=f.shift(),p=g.files,k=0;k<p.length;k++){var x=p[k],C=x.fileNameStr,S=s.resolve(x.fileNameStr);m.file(S,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:c.createFolders}),x.dir||(m.file(S).unsafeOriginalName=C)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,a){var s=t("../utils"),o=t("../stream/GenericWorker");function n(u,d){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(n,o),n.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(y){d.push({data:y,meta:{percent:0}})}).on("error",function(y){d.isPaused?this.generatedError=y:d.error(y)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},n.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,a){var s=t("readable-stream").Readable;function o(n,u,d){s.call(this,u),this._helper=n;var y=this;n.on("data",function(b,w){y.push(b)||y._helper.pause(),d&&d(w)}).on("error",function(b){y.emit("error",b)}).on("end",function(){y.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,a){function s(S,L,R){var T,B=n.getTypeOf(L),H=n.extend(R||{},y);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(S=p(S)),H.createFolders&&(T=g(S))&&k.call(this,T,!0);var Q=B==="string"&&H.binary===!1&&H.base64===!1;R&&R.binary!==void 0||(H.binary=!Q),(L instanceof b&&L.uncompressedSize===0||H.dir||!L||L.length===0)&&(H.base64=!1,H.binary=!0,L="",H.compression="STORE",B="string");var E=null;E=L instanceof b||L instanceof u?L:m.isNode&&m.isStream(L)?new f(S,L):n.prepareContent(S,L,H.binary,H.optimizedBinaryString,H.base64);var N=new w(S,E,H);this.files[S]=N}var o=t("./utf8"),n=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),y=t("./defaults"),b=t("./compressedObject"),w=t("./zipObject"),c=t("./generate"),m=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),g=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var L=S.lastIndexOf("/");return 0<L?S.substring(0,L):""},p=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},k=function(S,L){return L=L!==void 0?L:y.createFolders,S=p(S),this.files[S]||s.call(this,S,null,{dir:!0,createFolders:L}),this.files[S]};function x(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var L,R,T;for(L in this.files)T=this.files[L],(R=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&S(R,T)},filter:function(S){var L=[];return this.forEach(function(R,T){S(R,T)&&L.push(T)}),L},file:function(S,L,R){if(arguments.length!==1)return S=this.root+S,s.call(this,S,L,R),this;if(x(S)){var T=S;return this.filter(function(H,Q){return!Q.dir&&T.test(H)})}var B=this.files[this.root+S];return B&&!B.dir?B:null},folder:function(S){if(!S)return this;if(x(S))return this.filter(function(B,H){return H.dir&&S.test(B)});var L=this.root+S,R=k.call(this,L),T=this.clone();return T.root=R.name,T},remove:function(S){S=this.root+S;var L=this.files[S];if(L||(S.slice(-1)!=="/"&&(S+="/"),L=this.files[S]),L&&!L.dir)delete this.files[S];else for(var R=this.filter(function(B,H){return H.name.slice(0,S.length)===S}),T=0;T<R.length;T++)delete this.files[R[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var L,R={};try{if((R=n.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");n.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var T=R.comment||this.comment||"";L=c.generateWorker(this,R,T)}catch(B){(L=new u("error")).error(B)}return new d(L,R.type||"string",R.mimeType)},generateAsync:function(S,L){return this.generateInternalStream(S).accumulate(L)},generateNodeStream:function(S,L){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(L)}};i.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,a){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,a){var s=t("./DataReader");function o(n){s.call(this,n);for(var u=0;u<this.data.length;u++)n[u]=255&n[u]}t("../utils").inherits(o,s),o.prototype.byteAt=function(n){return this.data[this.zero+n]},o.prototype.lastIndexOfSignature=function(n){for(var u=n.charCodeAt(0),d=n.charCodeAt(1),y=n.charCodeAt(2),b=n.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===u&&this.data[w+1]===d&&this.data[w+2]===y&&this.data[w+3]===b)return w-this.zero;return-1},o.prototype.readAndCheckSignature=function(n){var u=n.charCodeAt(0),d=n.charCodeAt(1),y=n.charCodeAt(2),b=n.charCodeAt(3),w=this.readData(4);return u===w[0]&&d===w[1]&&y===w[2]&&b===w[3]},o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,i,a){var s=t("../utils");function o(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var u,d=0;for(this.checkOffset(n),u=this.index+n-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=n,d},readString:function(n){return s.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},i.exports=o},{"../utils":32}],19:[function(t,i,a){var s=t("./Uint8ArrayReader");function o(n){s.call(this,n)}t("../utils").inherits(o,s),o.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,a){var s=t("./DataReader");function o(n){s.call(this,n)}t("../utils").inherits(o,s),o.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},o.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},o.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},o.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,i,a){var s=t("./ArrayReader");function o(n){s.call(this,n)}t("../utils").inherits(o,s),o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,a){var s=t("../utils"),o=t("../support"),n=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),y=t("./Uint8ArrayReader");i.exports=function(b){var w=s.getTypeOf(b);return s.checkSupport(w),w!=="string"||o.uint8array?w==="nodebuffer"?new d(b):o.uint8array?new y(s.transformTo("uint8array",b)):new n(s.transformTo("array",b)):new u(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,a){var s=t("./GenericWorker"),o=t("../utils");function n(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(n,s),n.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},i.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,a){var s=t("./GenericWorker"),o=t("../crc32");function n(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(n,s),n.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,a){var s=t("../utils"),o=t("./GenericWorker");function n(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(n,o),n.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}o.prototype.processChunk.call(this,u)},i.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,a){var s=t("../utils"),o=t("./GenericWorker");function n(u){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(y){d.dataIsReady=!0,d.data=y,d.max=y&&y.length||0,d.type=s.getTypeOf(y),d.isPaused||d._tickAndRepeat()},function(y){d.error(y)})}s.inherits(n,o),n.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,a){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,n){return this._listeners[o].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,n){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,n)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var n=this;return o.on("data",function(u){n.processChunk(u)}),o.on("end",function(){n.end()}),o.on("error",function(u){n.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,n){return this.extraStreamInfo[o]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=s},{}],29:[function(t,i,a){var s=t("../utils"),o=t("./ConvertWorker"),n=t("./GenericWorker"),u=t("../base64"),d=t("../support"),y=t("../external"),b=null;if(d.nodestream)try{b=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(m,f){return new y.Promise(function(g,p){var k=[],x=m._internalType,C=m._outputType,S=m._mimeType;m.on("data",function(L,R){k.push(L),f&&f(R)}).on("error",function(L){k=[],p(L)}).on("end",function(){try{var L=function(R,T,B){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),B);case"base64":return u.encode(T);default:return s.transformTo(R,T)}}(C,function(R,T){var B,H=0,Q=null,E=0;for(B=0;B<T.length;B++)E+=T[B].length;switch(R){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(Q=new Uint8Array(E),B=0;B<T.length;B++)Q.set(T[B],H),H+=T[B].length;return Q;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+R+"'")}}(x,k),S);g(L)}catch(R){p(R)}k=[]}).resume()})}function c(m,f,g){var p=f;switch(f){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=f,this._mimeType=g,s.checkSupport(p),this._worker=m.pipe(new o(p)),m.lock()}catch(k){this._worker=new n("error"),this._worker.error(k)}}c.prototype={accumulate:function(m){return w(this,m)},on:function(m,f){var g=this;return m==="data"?this._worker.on(m,function(p){f.call(g,p.data,p.meta)}):this._worker.on(m,function(){s.delay(f,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,a){for(var s=t("./utils"),o=t("./support"),n=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),y=0;y<256;y++)d[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;d[254]=d[254]=1;function b(){u.call(this,"utf-8 decode"),this.leftOver=null}function w(){u.call(this,"utf-8 encode")}a.utf8encode=function(c){return o.nodebuffer?n.newBufferFrom(c,"utf-8"):function(m){var f,g,p,k,x,C=m.length,S=0;for(k=0;k<C;k++)(64512&(g=m.charCodeAt(k)))==55296&&k+1<C&&(64512&(p=m.charCodeAt(k+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),k++),S+=g<128?1:g<2048?2:g<65536?3:4;for(f=o.uint8array?new Uint8Array(S):new Array(S),k=x=0;x<S;k++)(64512&(g=m.charCodeAt(k)))==55296&&k+1<C&&(64512&(p=m.charCodeAt(k+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),k++),g<128?f[x++]=g:(g<2048?f[x++]=192|g>>>6:(g<65536?f[x++]=224|g>>>12:(f[x++]=240|g>>>18,f[x++]=128|g>>>12&63),f[x++]=128|g>>>6&63),f[x++]=128|63&g);return f}(c)},a.utf8decode=function(c){return o.nodebuffer?s.transformTo("nodebuffer",c).toString("utf-8"):function(m){var f,g,p,k,x=m.length,C=new Array(2*x);for(f=g=0;f<x;)if((p=m[f++])<128)C[g++]=p;else if(4<(k=d[p]))C[g++]=65533,f+=k-1;else{for(p&=k===2?31:k===3?15:7;1<k&&f<x;)p=p<<6|63&m[f++],k--;1<k?C[g++]=65533:p<65536?C[g++]=p:(p-=65536,C[g++]=55296|p>>10&1023,C[g++]=56320|1023&p)}return C.length!==g&&(C.subarray?C=C.subarray(0,g):C.length=g),s.applyFromCharCode(C)}(c=s.transformTo(o.uint8array?"uint8array":"array",c))},s.inherits(b,u),b.prototype.processChunk=function(c){var m=s.transformTo(o.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=m;(m=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),m.set(f,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var g=function(k,x){var C;for((x=x||k.length)>k.length&&(x=k.length),C=x-1;0<=C&&(192&k[C])==128;)C--;return C<0||C===0?x:C+d[k[C]]>x?C:x}(m),p=m;g!==m.length&&(o.uint8array?(p=m.subarray(0,g),this.leftOver=m.subarray(g,m.length)):(p=m.slice(0,g),this.leftOver=m.slice(g,m.length))),this.push({data:a.utf8decode(p),meta:c.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=b,s.inherits(w,u),w.prototype.processChunk=function(c){this.push({data:a.utf8encode(c.data),meta:c.meta})},a.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,a){var s=t("./support"),o=t("./base64"),n=t("./nodejsUtils"),u=t("./external");function d(f){return f}function y(f,g){for(var p=0;p<f.length;++p)g[p]=255&f.charCodeAt(p);return g}t("setimmediate"),a.newBlob=function(f,g){a.checkSupport("blob");try{return new Blob([f],{type:g})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(f),p.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(f,g,p){var k=[],x=0,C=f.length;if(C<=p)return String.fromCharCode.apply(null,f);for(;x<C;)g==="array"||g==="nodebuffer"?k.push(String.fromCharCode.apply(null,f.slice(x,Math.min(x+p,C)))):k.push(String.fromCharCode.apply(null,f.subarray(x,Math.min(x+p,C)))),x+=p;return k.join("")},stringifyByChar:function(f){for(var g="",p=0;p<f.length;p++)g+=String.fromCharCode(f[p]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function w(f){var g=65536,p=a.getTypeOf(f),k=!0;if(p==="uint8array"?k=b.applyCanBeUsed.uint8array:p==="nodebuffer"&&(k=b.applyCanBeUsed.nodebuffer),k)for(;1<g;)try{return b.stringifyByChunk(f,p,g)}catch{g=Math.floor(g/2)}return b.stringifyByChar(f)}function c(f,g){for(var p=0;p<f.length;p++)g[p]=f[p];return g}a.applyFromCharCode=w;var m={};m.string={string:d,array:function(f){return y(f,new Array(f.length))},arraybuffer:function(f){return m.string.uint8array(f).buffer},uint8array:function(f){return y(f,new Uint8Array(f.length))},nodebuffer:function(f){return y(f,n.allocBuffer(f.length))}},m.array={string:w,array:d,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return n.newBufferFrom(f)}},m.arraybuffer={string:function(f){return w(new Uint8Array(f))},array:function(f){return c(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:d,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return n.newBufferFrom(new Uint8Array(f))}},m.uint8array={string:w,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:d,nodebuffer:function(f){return n.newBufferFrom(f)}},m.nodebuffer={string:w,array:function(f){return c(f,new Array(f.length))},arraybuffer:function(f){return m.nodebuffer.uint8array(f).buffer},uint8array:function(f){return c(f,new Uint8Array(f.length))},nodebuffer:d},a.transformTo=function(f,g){if(g=g||"",!f)return g;a.checkSupport(f);var p=a.getTypeOf(g);return m[p][f](g)},a.resolve=function(f){for(var g=f.split("/"),p=[],k=0;k<g.length;k++){var x=g[k];x==="."||x===""&&k!==0&&k!==g.length-1||(x===".."?p.pop():p.push(x))}return p.join("/")},a.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&n.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(f){var g,p,k="";for(p=0;p<(f||"").length;p++)k+="\\x"+((g=f.charCodeAt(p))<16?"0":"")+g.toString(16).toUpperCase();return k},a.delay=function(f,g,p){setImmediate(function(){f.apply(p||null,g||[])})},a.inherits=function(f,g){function p(){}p.prototype=g.prototype,f.prototype=new p},a.extend=function(){var f,g,p={};for(f=0;f<arguments.length;f++)for(g in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],g)&&p[g]===void 0&&(p[g]=arguments[f][g]);return p},a.prepareContent=function(f,g,p,k,x){return u.Promise.resolve(g).then(function(C){return s.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(S,L){var R=new FileReader;R.onload=function(T){S(T.target.result)},R.onerror=function(T){L(T.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var S=a.getTypeOf(C);return S?(S==="arraybuffer"?C=a.transformTo("uint8array",C):S==="string"&&(x?C=o.decode(C):p&&k!==!0&&(C=function(L){return y(L,s.uint8array?new Uint8Array(L.length):new Array(L.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,a){var s=t("./reader/readerFor"),o=t("./utils"),n=t("./signature"),u=t("./zipEntry"),d=t("./support");function y(b){this.files=[],this.loadOptions=b}y.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(w)+", expected "+o.pretty(b)+")")}},isSignature:function(b,w){var c=this.reader.index;this.reader.setIndex(b);var m=this.reader.readString(4)===w;return this.reader.setIndex(c),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),w=d.uint8array?"uint8array":"array",c=o.transformTo(w,b);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,w,c,m=this.zip64EndOfCentralSize-44;0<m;)b=this.reader.readInt(2),w=this.reader.readInt(4),c=this.reader.readData(w),this.zip64ExtensibleData[b]={id:b,length:w,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,w;for(b=0;b<this.files.length;b++)w=this.files[b],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(b=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var w=b;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var m=w-c;if(0<m)this.isSignature(w,n.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(b){this.reader=s(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,a){var s=t("./reader/readerFor"),o=t("./utils"),n=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),y=t("./compressions"),b=t("./support");function w(c,m){this.options=c,this.loadOptions=m}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var m,f;if(c.skip(22),this.fileNameLength=c.readInt(2),f=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(g){for(var p in y)if(Object.prototype.hasOwnProperty.call(y,p)&&y[p].magic===g)return y[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,m,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var m=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(m),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var m,f,g,p=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<p;)m=c.readInt(2),f=c.readInt(2),g=c.readData(f),this.extraFields[m]={id:m,length:f,value:g};c.setIndex(p)},handleUTF8:function(){var c=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var f=o.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var p=o.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var m=s(c.value);return m.readInt(1)!==1||u(this.fileName)!==m.readInt(4)?null:d.utf8decode(m.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var m=s(c.value);return m.readInt(1)!==1||u(this.fileComment)!==m.readInt(4)?null:d.utf8decode(m.readData(c.length-5))}return null}},i.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,a){function s(m,f,g){this.name=m,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=f,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),y=t("./stream/GenericWorker");s.prototype={internalStream:function(m){var f=null,g="string";try{if(!m)throw new Error("No output type specified.");var p=(g=m.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),f=this._decompressWorker();var k=!this._dataBinary;k&&!p&&(f=f.pipe(new u.Utf8EncodeWorker)),!k&&p&&(f=f.pipe(new u.Utf8DecodeWorker))}catch(x){(f=new y("error")).error(x)}return new o(f,g,"")},async:function(m,f){return this.internalStream(m).accumulate(f)},nodeStream:function(m,f){return this.internalStream(m||"nodebuffer").toNodejsStream(f)},_compressWorker:function(m,f){if(this._data instanceof d&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(g,m,f)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof y?this._data:new n(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<b.length;c++)s.prototype[b[c]]=w;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,a){(function(s){var o,n,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var d=0,y=new u(m),b=s.document.createTextNode("");y.observe(b,{characterData:!0}),o=function(){b.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){m(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(m,0)};else{var w=new s.MessageChannel;w.port1.onmessage=m,o=function(){w.port2.postMessage(0)}}var c=[];function m(){var f,g;n=!0;for(var p=c.length;p;){for(g=c,c=[],f=-1;++f<p;)g[f]();p=c.length}n=!1}i.exports=function(f){c.push(f)!==1||n||o()}}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,a){var s=t("immediate");function o(){}var n={},u=["REJECTED"],d=["FULFILLED"],y=["PENDING"];function b(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,p!==o&&f(this,p)}function w(p,k,x){this.promise=p,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function c(p,k,x){s(function(){var C;try{C=k(x)}catch(S){return n.reject(p,S)}C===p?n.reject(p,new TypeError("Cannot resolve promise with itself")):n.resolve(p,C)})}function m(p){var k=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof k=="function")return function(){k.apply(p,arguments)}}function f(p,k){var x=!1;function C(R){x||(x=!0,n.reject(p,R))}function S(R){x||(x=!0,n.resolve(p,R))}var L=g(function(){k(S,C)});L.status==="error"&&C(L.value)}function g(p,k){var x={};try{x.value=p(k),x.status="success"}catch(C){x.status="error",x.value=C}return x}(i.exports=b).prototype.finally=function(p){if(typeof p!="function")return this;var k=this.constructor;return this.then(function(x){return k.resolve(p()).then(function(){return x})},function(x){return k.resolve(p()).then(function(){throw x})})},b.prototype.catch=function(p){return this.then(null,p)},b.prototype.then=function(p,k){if(typeof p!="function"&&this.state===d||typeof k!="function"&&this.state===u)return this;var x=new this.constructor(o);return this.state!==y?c(x,this.state===d?p:k,this.outcome):this.queue.push(new w(x,p,k)),x},w.prototype.callFulfilled=function(p){n.resolve(this.promise,p)},w.prototype.otherCallFulfilled=function(p){c(this.promise,this.onFulfilled,p)},w.prototype.callRejected=function(p){n.reject(this.promise,p)},w.prototype.otherCallRejected=function(p){c(this.promise,this.onRejected,p)},n.resolve=function(p,k){var x=g(m,k);if(x.status==="error")return n.reject(p,x.value);var C=x.value;if(C)f(p,C);else{p.state=d,p.outcome=k;for(var S=-1,L=p.queue.length;++S<L;)p.queue[S].callFulfilled(k)}return p},n.reject=function(p,k){p.state=u,p.outcome=k;for(var x=-1,C=p.queue.length;++x<C;)p.queue[x].callRejected(k);return p},b.resolve=function(p){return p instanceof this?p:n.resolve(new this(o),p)},b.reject=function(p){var k=new this(o);return n.reject(k,p)},b.all=function(p){var k=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=p.length,C=!1;if(!x)return this.resolve([]);for(var S=new Array(x),L=0,R=-1,T=new this(o);++R<x;)B(p[R],R);return T;function B(H,Q){k.resolve(H).then(function(E){S[Q]=E,++L!==x||C||(C=!0,n.resolve(T,S))},function(E){C||(C=!0,n.reject(T,E))})}},b.race=function(p){var k=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=p.length,C=!1;if(!x)return this.resolve([]);for(var S=-1,L=new this(o);++S<x;)R=p[S],k.resolve(R).then(function(T){C||(C=!0,n.resolve(L,T))},function(T){C||(C=!0,n.reject(L,T))});var R;return L}},{immediate:36}],38:[function(t,i,a){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,a){var s=t("./zlib/deflate"),o=t("./utils/common"),n=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),y=Object.prototype.toString,b=0,w=-1,c=0,m=8;function f(p){if(!(this instanceof f))return new f(p);this.options=o.assign({level:w,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},p||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=s.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(x!==b)throw new Error(u[x]);if(k.header&&s.deflateSetHeader(this.strm,k.header),k.dictionary){var C;if(C=typeof k.dictionary=="string"?n.string2buf(k.dictionary):y.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(x=s.deflateSetDictionary(this.strm,C))!==b)throw new Error(u[x]);this._dict_set=!0}}function g(p,k){var x=new f(k);if(x.push(p,!0),x.err)throw x.msg||u[x.err];return x.result}f.prototype.push=function(p,k){var x,C,S=this.strm,L=this.options.chunkSize;if(this.ended)return!1;C=k===~~k?k:k===!0?4:0,typeof p=="string"?S.input=n.string2buf(p):y.call(p)==="[object ArrayBuffer]"?S.input=new Uint8Array(p):S.input=p,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(L),S.next_out=0,S.avail_out=L),(x=s.deflate(S,C))!==1&&x!==b)return this.onEnd(x),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(o.shrinkBuf(S.output,S.next_out))):this.onData(o.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&x!==1);return C===4?(x=s.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===b):C!==2||(this.onEnd(b),!(S.avail_out=0))},f.prototype.onData=function(p){this.chunks.push(p)},f.prototype.onEnd=function(p){p===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Deflate=f,a.deflate=g,a.deflateRaw=function(p,k){return(k=k||{}).raw=!0,g(p,k)},a.gzip=function(p,k){return(k=k||{}).gzip=!0,g(p,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,a){var s=t("./zlib/inflate"),o=t("./utils/common"),n=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),y=t("./zlib/zstream"),b=t("./zlib/gzheader"),w=Object.prototype.toString;function c(f){if(!(this instanceof c))return new c(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||f&&f.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,g.windowBits);if(p!==u.Z_OK)throw new Error(d[p]);this.header=new b,s.inflateGetHeader(this.strm,this.header)}function m(f,g){var p=new c(g);if(p.push(f,!0),p.err)throw p.msg||d[p.err];return p.result}c.prototype.push=function(f,g){var p,k,x,C,S,L,R=this.strm,T=this.options.chunkSize,B=this.options.dictionary,H=!1;if(this.ended)return!1;k=g===~~g?g:g===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof f=="string"?R.input=n.binstring2buf(f):w.call(f)==="[object ArrayBuffer]"?R.input=new Uint8Array(f):R.input=f,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(T),R.next_out=0,R.avail_out=T),(p=s.inflate(R,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&B&&(L=typeof B=="string"?n.string2buf(B):w.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,p=s.inflateSetDictionary(this.strm,L)),p===u.Z_BUF_ERROR&&H===!0&&(p=u.Z_OK,H=!1),p!==u.Z_STREAM_END&&p!==u.Z_OK)return this.onEnd(p),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&p!==u.Z_STREAM_END&&(R.avail_in!==0||k!==u.Z_FINISH&&k!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=n.utf8border(R.output,R.next_out),C=R.next_out-x,S=n.buf2string(R.output,x),R.next_out=C,R.avail_out=T-C,C&&o.arraySet(R.output,R.output,x,C,0),this.onData(S)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(H=!0)}while((0<R.avail_in||R.avail_out===0)&&p!==u.Z_STREAM_END);return p===u.Z_STREAM_END&&(k=u.Z_FINISH),k===u.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===u.Z_OK):k!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(R.avail_out=0))},c.prototype.onData=function(f){this.chunks.push(f)},c.prototype.onEnd=function(f){f===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},a.Inflate=c,a.inflate=m,a.inflateRaw=function(f,g){return(g=g||{}).raw=!0,m(f,g)},a.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var y=d.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var b in y)y.hasOwnProperty(b)&&(u[b]=y[b])}}return u},a.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var o={arraySet:function(u,d,y,b,w){if(d.subarray&&u.subarray)u.set(d.subarray(y,y+b),w);else for(var c=0;c<b;c++)u[w+c]=d[y+c]},flattenChunks:function(u){var d,y,b,w,c,m;for(d=b=0,y=u.length;d<y;d++)b+=u[d].length;for(m=new Uint8Array(b),d=w=0,y=u.length;d<y;d++)c=u[d],m.set(c,w),w+=c.length;return m}},n={arraySet:function(u,d,y,b,w){for(var c=0;c<b;c++)u[w+c]=d[y+c]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,n))},a.setTyped(s)},{}],42:[function(t,i,a){var s=t("./common"),o=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var u=new s.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function y(b,w){if(w<65537&&(b.subarray&&n||!b.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(b,w));for(var c="",m=0;m<w;m++)c+=String.fromCharCode(b[m]);return c}u[254]=u[254]=1,a.string2buf=function(b){var w,c,m,f,g,p=b.length,k=0;for(f=0;f<p;f++)(64512&(c=b.charCodeAt(f)))==55296&&f+1<p&&(64512&(m=b.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(m-56320),f++),k+=c<128?1:c<2048?2:c<65536?3:4;for(w=new s.Buf8(k),f=g=0;g<k;f++)(64512&(c=b.charCodeAt(f)))==55296&&f+1<p&&(64512&(m=b.charCodeAt(f+1)))==56320&&(c=65536+(c-55296<<10)+(m-56320),f++),c<128?w[g++]=c:(c<2048?w[g++]=192|c>>>6:(c<65536?w[g++]=224|c>>>12:(w[g++]=240|c>>>18,w[g++]=128|c>>>12&63),w[g++]=128|c>>>6&63),w[g++]=128|63&c);return w},a.buf2binstring=function(b){return y(b,b.length)},a.binstring2buf=function(b){for(var w=new s.Buf8(b.length),c=0,m=w.length;c<m;c++)w[c]=b.charCodeAt(c);return w},a.buf2string=function(b,w){var c,m,f,g,p=w||b.length,k=new Array(2*p);for(c=m=0;c<p;)if((f=b[c++])<128)k[m++]=f;else if(4<(g=u[f]))k[m++]=65533,c+=g-1;else{for(f&=g===2?31:g===3?15:7;1<g&&c<p;)f=f<<6|63&b[c++],g--;1<g?k[m++]=65533:f<65536?k[m++]=f:(f-=65536,k[m++]=55296|f>>10&1023,k[m++]=56320|1023&f)}return y(k,m)},a.utf8border=function(b,w){var c;for((w=w||b.length)>b.length&&(w=b.length),c=w-1;0<=c&&(192&b[c])==128;)c--;return c<0||c===0?w:c+u[b[c]]>w?c:w}},{"./common":41}],43:[function(t,i,a){i.exports=function(s,o,n,u){for(var d=65535&s|0,y=s>>>16&65535|0,b=0;n!==0;){for(n-=b=2e3<n?2e3:n;y=y+(d=d+o[u++]|0)|0,--b;);d%=65521,y%=65521}return d|y<<16|0}},{}],44:[function(t,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,a){var s=function(){for(var o,n=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;n[u]=o}return n}();i.exports=function(o,n,u,d){var y=s,b=d+u;o^=-1;for(var w=d;w<b;w++)o=o>>>8^y[255&(o^n[w])];return-1^o}},{}],46:[function(t,i,a){var s,o=t("../utils/common"),n=t("./trees"),u=t("./adler32"),d=t("./crc32"),y=t("./messages"),b=0,w=4,c=0,m=-2,f=-1,g=4,p=2,k=8,x=9,C=286,S=30,L=19,R=2*C+1,T=15,B=3,H=258,Q=H+B+1,E=42,N=113,l=1,U=2,et=3,Z=4;function rt(r,F){return r.msg=y[F],F}function W(r){return(r<<1)-(4<r?9:0)}function tt(r){for(var F=r.length;0<=--F;)r[F]=0}function z(r){var F=r.state,P=F.pending;P>r.avail_out&&(P=r.avail_out),P!==0&&(o.arraySet(r.output,F.pending_buf,F.pending_out,P,r.next_out),r.next_out+=P,F.pending_out+=P,r.total_out+=P,r.avail_out-=P,F.pending-=P,F.pending===0&&(F.pending_out=0))}function O(r,F){n._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,F),r.block_start=r.strstart,z(r.strm)}function q(r,F){r.pending_buf[r.pending++]=F}function J(r,F){r.pending_buf[r.pending++]=F>>>8&255,r.pending_buf[r.pending++]=255&F}function V(r,F){var P,v,_=r.max_chain_length,A=r.strstart,j=r.prev_length,D=r.nice_match,I=r.strstart>r.w_size-Q?r.strstart-(r.w_size-Q):0,M=r.window,K=r.w_mask,G=r.prev,Y=r.strstart+H,ot=M[A+j-1],it=M[A+j];r.prev_length>=r.good_match&&(_>>=2),D>r.lookahead&&(D=r.lookahead);do if(M[(P=F)+j]===it&&M[P+j-1]===ot&&M[P]===M[A]&&M[++P]===M[A+1]){A+=2,P++;do;while(M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&M[++A]===M[++P]&&A<Y);if(v=H-(Y-A),A=Y-H,j<v){if(r.match_start=F,D<=(j=v))break;ot=M[A+j-1],it=M[A+j]}}while((F=G[F&K])>I&&--_!=0);return j<=r.lookahead?j:r.lookahead}function ht(r){var F,P,v,_,A,j,D,I,M,K,G=r.w_size;do{if(_=r.window_size-r.lookahead-r.strstart,r.strstart>=G+(G-Q)){for(o.arraySet(r.window,r.window,G,G,0),r.match_start-=G,r.strstart-=G,r.block_start-=G,F=P=r.hash_size;v=r.head[--F],r.head[F]=G<=v?v-G:0,--P;);for(F=P=G;v=r.prev[--F],r.prev[F]=G<=v?v-G:0,--P;);_+=G}if(r.strm.avail_in===0)break;if(j=r.strm,D=r.window,I=r.strstart+r.lookahead,M=_,K=void 0,K=j.avail_in,M<K&&(K=M),P=K===0?0:(j.avail_in-=K,o.arraySet(D,j.input,j.next_in,K,I),j.state.wrap===1?j.adler=u(j.adler,D,K,I):j.state.wrap===2&&(j.adler=d(j.adler,D,K,I)),j.next_in+=K,j.total_in+=K,K),r.lookahead+=P,r.lookahead+r.insert>=B)for(A=r.strstart-r.insert,r.ins_h=r.window[A],r.ins_h=(r.ins_h<<r.hash_shift^r.window[A+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[A+B-1])&r.hash_mask,r.prev[A&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=A,A++,r.insert--,!(r.lookahead+r.insert<B)););}while(r.lookahead<Q&&r.strm.avail_in!==0)}function ft(r,F){for(var P,v;;){if(r.lookahead<Q){if(ht(r),r.lookahead<Q&&F===b)return l;if(r.lookahead===0)break}if(P=0,r.lookahead>=B&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),P!==0&&r.strstart-P<=r.w_size-Q&&(r.match_length=V(r,P)),r.match_length>=B)if(v=n._tr_tally(r,r.strstart-r.match_start,r.match_length-B),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=B){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else v=n._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(v&&(O(r,!1),r.strm.avail_out===0))return l}return r.insert=r.strstart<B-1?r.strstart:B-1,F===w?(O(r,!0),r.strm.avail_out===0?et:Z):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?l:U}function nt(r,F){for(var P,v,_;;){if(r.lookahead<Q){if(ht(r),r.lookahead<Q&&F===b)return l;if(r.lookahead===0)break}if(P=0,r.lookahead>=B&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=B-1,P!==0&&r.prev_length<r.max_lazy_match&&r.strstart-P<=r.w_size-Q&&(r.match_length=V(r,P),r.match_length<=5&&(r.strategy===1||r.match_length===B&&4096<r.strstart-r.match_start)&&(r.match_length=B-1)),r.prev_length>=B&&r.match_length<=r.prev_length){for(_=r.strstart+r.lookahead-B,v=n._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-B),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=_&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+B-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=B-1,r.strstart++,v&&(O(r,!1),r.strm.avail_out===0))return l}else if(r.match_available){if((v=n._tr_tally(r,0,r.window[r.strstart-1]))&&O(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return l}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(v=n._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<B-1?r.strstart:B-1,F===w?(O(r,!0),r.strm.avail_out===0?et:Z):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?l:U}function st(r,F,P,v,_){this.good_length=r,this.max_lazy=F,this.nice_length=P,this.max_chain=v,this.func=_}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*S+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*C+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(r){var F;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=p,(F=r.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?E:N,r.adler=F.wrap===2?0:1,F.last_flush=b,n._tr_init(F),c):rt(r,m)}function mt(r){var F=lt(r);return F===c&&function(P){P.window_size=2*P.w_size,tt(P.head),P.max_lazy_match=s[P.level].max_lazy,P.good_match=s[P.level].good_length,P.nice_match=s[P.level].nice_length,P.max_chain_length=s[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=B-1,P.match_available=0,P.ins_h=0}(r.state),F}function pt(r,F,P,v,_,A){if(!r)return m;var j=1;if(F===f&&(F=6),v<0?(j=0,v=-v):15<v&&(j=2,v-=16),_<1||x<_||P!==k||v<8||15<v||F<0||9<F||A<0||g<A)return rt(r,m);v===8&&(v=9);var D=new ct;return(r.state=D).strm=r,D.wrap=j,D.gzhead=null,D.w_bits=v,D.w_size=1<<D.w_bits,D.w_mask=D.w_size-1,D.hash_bits=_+7,D.hash_size=1<<D.hash_bits,D.hash_mask=D.hash_size-1,D.hash_shift=~~((D.hash_bits+B-1)/B),D.window=new o.Buf8(2*D.w_size),D.head=new o.Buf16(D.hash_size),D.prev=new o.Buf16(D.w_size),D.lit_bufsize=1<<_+6,D.pending_buf_size=4*D.lit_bufsize,D.pending_buf=new o.Buf8(D.pending_buf_size),D.d_buf=1*D.lit_bufsize,D.l_buf=3*D.lit_bufsize,D.level=F,D.strategy=A,D.method=P,mt(r)}s=[new st(0,0,0,0,function(r,F){var P=65535;for(P>r.pending_buf_size-5&&(P=r.pending_buf_size-5);;){if(r.lookahead<=1){if(ht(r),r.lookahead===0&&F===b)return l;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var v=r.block_start+P;if((r.strstart===0||r.strstart>=v)&&(r.lookahead=r.strstart-v,r.strstart=v,O(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-Q&&(O(r,!1),r.strm.avail_out===0))return l}return r.insert=0,F===w?(O(r,!0),r.strm.avail_out===0?et:Z):(r.strstart>r.block_start&&(O(r,!1),r.strm.avail_out),l)}),new st(4,4,8,4,ft),new st(4,5,16,8,ft),new st(4,6,32,32,ft),new st(4,4,16,16,nt),new st(8,16,32,32,nt),new st(8,16,128,128,nt),new st(8,32,128,256,nt),new st(32,128,258,1024,nt),new st(32,258,258,4096,nt)],a.deflateInit=function(r,F){return pt(r,F,k,15,8,0)},a.deflateInit2=pt,a.deflateReset=mt,a.deflateResetKeep=lt,a.deflateSetHeader=function(r,F){return r&&r.state?r.state.wrap!==2?m:(r.state.gzhead=F,c):m},a.deflate=function(r,F){var P,v,_,A;if(!r||!r.state||5<F||F<0)return r?rt(r,m):m;if(v=r.state,!r.output||!r.input&&r.avail_in!==0||v.status===666&&F!==w)return rt(r,r.avail_out===0?-5:m);if(v.strm=r,P=v.last_flush,v.last_flush=F,v.status===E)if(v.wrap===2)r.adler=0,q(v,31),q(v,139),q(v,8),v.gzhead?(q(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),q(v,255&v.gzhead.time),q(v,v.gzhead.time>>8&255),q(v,v.gzhead.time>>16&255),q(v,v.gzhead.time>>24&255),q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),q(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(q(v,255&v.gzhead.extra.length),q(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(r.adler=d(r.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(q(v,0),q(v,0),q(v,0),q(v,0),q(v,0),q(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),q(v,3),v.status=N);else{var j=k+(v.w_bits-8<<4)<<8;j|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(j|=32),j+=31-j%31,v.status=N,J(v,j),v.strstart!==0&&(J(v,r.adler>>>16),J(v,65535&r.adler)),r.adler=1}if(v.status===69)if(v.gzhead.extra){for(_=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),z(r),_=v.pending,v.pending!==v.pending_buf_size));)q(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){_=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),z(r),_=v.pending,v.pending===v.pending_buf_size)){A=1;break}A=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,q(v,A)}while(A!==0);v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),A===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){_=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),z(r),_=v.pending,v.pending===v.pending_buf_size)){A=1;break}A=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,q(v,A)}while(A!==0);v.gzhead.hcrc&&v.pending>_&&(r.adler=d(r.adler,v.pending_buf,v.pending-_,_)),A===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&z(r),v.pending+2<=v.pending_buf_size&&(q(v,255&r.adler),q(v,r.adler>>8&255),r.adler=0,v.status=N)):v.status=N),v.pending!==0){if(z(r),r.avail_out===0)return v.last_flush=-1,c}else if(r.avail_in===0&&W(F)<=W(P)&&F!==w)return rt(r,-5);if(v.status===666&&r.avail_in!==0)return rt(r,-5);if(r.avail_in!==0||v.lookahead!==0||F!==b&&v.status!==666){var D=v.strategy===2?function(I,M){for(var K;;){if(I.lookahead===0&&(ht(I),I.lookahead===0)){if(M===b)return l;break}if(I.match_length=0,K=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,K&&(O(I,!1),I.strm.avail_out===0))return l}return I.insert=0,M===w?(O(I,!0),I.strm.avail_out===0?et:Z):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?l:U}(v,F):v.strategy===3?function(I,M){for(var K,G,Y,ot,it=I.window;;){if(I.lookahead<=H){if(ht(I),I.lookahead<=H&&M===b)return l;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=B&&0<I.strstart&&(G=it[Y=I.strstart-1])===it[++Y]&&G===it[++Y]&&G===it[++Y]){ot=I.strstart+H;do;while(G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&G===it[++Y]&&Y<ot);I.match_length=H-(ot-Y),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=B?(K=n._tr_tally(I,1,I.match_length-B),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(K=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),K&&(O(I,!1),I.strm.avail_out===0))return l}return I.insert=0,M===w?(O(I,!0),I.strm.avail_out===0?et:Z):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?l:U}(v,F):s[v.level].func(v,F);if(D!==et&&D!==Z||(v.status=666),D===l||D===et)return r.avail_out===0&&(v.last_flush=-1),c;if(D===U&&(F===1?n._tr_align(v):F!==5&&(n._tr_stored_block(v,0,0,!1),F===3&&(tt(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),z(r),r.avail_out===0))return v.last_flush=-1,c}return F!==w?c:v.wrap<=0?1:(v.wrap===2?(q(v,255&r.adler),q(v,r.adler>>8&255),q(v,r.adler>>16&255),q(v,r.adler>>24&255),q(v,255&r.total_in),q(v,r.total_in>>8&255),q(v,r.total_in>>16&255),q(v,r.total_in>>24&255)):(J(v,r.adler>>>16),J(v,65535&r.adler)),z(r),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?c:1)},a.deflateEnd=function(r){var F;return r&&r.state?(F=r.state.status)!==E&&F!==69&&F!==73&&F!==91&&F!==103&&F!==N&&F!==666?rt(r,m):(r.state=null,F===N?rt(r,-3):c):m},a.deflateSetDictionary=function(r,F){var P,v,_,A,j,D,I,M,K=F.length;if(!r||!r.state||(A=(P=r.state).wrap)===2||A===1&&P.status!==E||P.lookahead)return m;for(A===1&&(r.adler=u(r.adler,F,K,0)),P.wrap=0,K>=P.w_size&&(A===0&&(tt(P.head),P.strstart=0,P.block_start=0,P.insert=0),M=new o.Buf8(P.w_size),o.arraySet(M,F,K-P.w_size,P.w_size,0),F=M,K=P.w_size),j=r.avail_in,D=r.next_in,I=r.input,r.avail_in=K,r.next_in=0,r.input=F,ht(P);P.lookahead>=B;){for(v=P.strstart,_=P.lookahead-(B-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[v+B-1])&P.hash_mask,P.prev[v&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=v,v++,--_;);P.strstart=v,P.lookahead=B-1,ht(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=B-1,P.match_available=0,r.next_in=D,r.input=I,r.avail_in=j,P.wrap=A,c},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,a){i.exports=function(s,o){var n,u,d,y,b,w,c,m,f,g,p,k,x,C,S,L,R,T,B,H,Q,E,N,l,U;n=s.state,u=s.next_in,l=s.input,d=u+(s.avail_in-5),y=s.next_out,U=s.output,b=y-(o-s.avail_out),w=y+(s.avail_out-257),c=n.dmax,m=n.wsize,f=n.whave,g=n.wnext,p=n.window,k=n.hold,x=n.bits,C=n.lencode,S=n.distcode,L=(1<<n.lenbits)-1,R=(1<<n.distbits)-1;t:do{x<15&&(k+=l[u++]<<x,x+=8,k+=l[u++]<<x,x+=8),T=C[k&L];e:for(;;){if(k>>>=B=T>>>24,x-=B,(B=T>>>16&255)===0)U[y++]=65535&T;else{if(!(16&B)){if(!(64&B)){T=C[(65535&T)+(k&(1<<B)-1)];continue e}if(32&B){n.mode=12;break t}s.msg="invalid literal/length code",n.mode=30;break t}H=65535&T,(B&=15)&&(x<B&&(k+=l[u++]<<x,x+=8),H+=k&(1<<B)-1,k>>>=B,x-=B),x<15&&(k+=l[u++]<<x,x+=8,k+=l[u++]<<x,x+=8),T=S[k&R];r:for(;;){if(k>>>=B=T>>>24,x-=B,!(16&(B=T>>>16&255))){if(!(64&B)){T=S[(65535&T)+(k&(1<<B)-1)];continue r}s.msg="invalid distance code",n.mode=30;break t}if(Q=65535&T,x<(B&=15)&&(k+=l[u++]<<x,(x+=8)<B&&(k+=l[u++]<<x,x+=8)),c<(Q+=k&(1<<B)-1)){s.msg="invalid distance too far back",n.mode=30;break t}if(k>>>=B,x-=B,(B=y-b)<Q){if(f<(B=Q-B)&&n.sane){s.msg="invalid distance too far back",n.mode=30;break t}if(N=p,(E=0)===g){if(E+=m-B,B<H){for(H-=B;U[y++]=p[E++],--B;);E=y-Q,N=U}}else if(g<B){if(E+=m+g-B,(B-=g)<H){for(H-=B;U[y++]=p[E++],--B;);if(E=0,g<H){for(H-=B=g;U[y++]=p[E++],--B;);E=y-Q,N=U}}}else if(E+=g-B,B<H){for(H-=B;U[y++]=p[E++],--B;);E=y-Q,N=U}for(;2<H;)U[y++]=N[E++],U[y++]=N[E++],U[y++]=N[E++],H-=3;H&&(U[y++]=N[E++],1<H&&(U[y++]=N[E++]))}else{for(E=y-Q;U[y++]=U[E++],U[y++]=U[E++],U[y++]=U[E++],2<(H-=3););H&&(U[y++]=U[E++],1<H&&(U[y++]=U[E++]))}break}}break}}while(u<d&&y<w);u-=H=x>>3,k&=(1<<(x-=H<<3))-1,s.next_in=u,s.next_out=y,s.avail_in=u<d?d-u+5:5-(u-d),s.avail_out=y<w?w-y+257:257-(y-w),n.hold=k,n.bits=x}},{}],49:[function(t,i,a){var s=t("../utils/common"),o=t("./adler32"),n=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),y=1,b=2,w=0,c=-2,m=1,f=852,g=592;function p(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(E){var N;return E&&E.state?(N=E.state,E.total_in=E.total_out=N.total=0,E.msg="",N.wrap&&(E.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new s.Buf32(f),N.distcode=N.distdyn=new s.Buf32(g),N.sane=1,N.back=-1,w):c}function C(E){var N;return E&&E.state?((N=E.state).wsize=0,N.whave=0,N.wnext=0,x(E)):c}function S(E,N){var l,U;return E&&E.state?(U=E.state,N<0?(l=0,N=-N):(l=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?c:(U.window!==null&&U.wbits!==N&&(U.window=null),U.wrap=l,U.wbits=N,C(E))):c}function L(E,N){var l,U;return E?(U=new k,(E.state=U).window=null,(l=S(E,N))!==w&&(E.state=null),l):c}var R,T,B=!0;function H(E){if(B){var N;for(R=new s.Buf32(512),T=new s.Buf32(32),N=0;N<144;)E.lens[N++]=8;for(;N<256;)E.lens[N++]=9;for(;N<280;)E.lens[N++]=7;for(;N<288;)E.lens[N++]=8;for(d(y,E.lens,0,288,R,0,E.work,{bits:9}),N=0;N<32;)E.lens[N++]=5;d(b,E.lens,0,32,T,0,E.work,{bits:5}),B=!1}E.lencode=R,E.lenbits=9,E.distcode=T,E.distbits=5}function Q(E,N,l,U){var et,Z=E.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new s.Buf8(Z.wsize)),U>=Z.wsize?(s.arraySet(Z.window,N,l-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(et=Z.wsize-Z.wnext)&&(et=U),s.arraySet(Z.window,N,l-U,et,Z.wnext),(U-=et)?(s.arraySet(Z.window,N,l-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=et,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=et))),0}a.inflateReset=C,a.inflateReset2=S,a.inflateResetKeep=x,a.inflateInit=function(E){return L(E,15)},a.inflateInit2=L,a.inflate=function(E,N){var l,U,et,Z,rt,W,tt,z,O,q,J,V,ht,ft,nt,st,ct,lt,mt,pt,r,F,P,v,_=0,A=new s.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return c;(l=E.state).mode===12&&(l.mode=13),rt=E.next_out,et=E.output,tt=E.avail_out,Z=E.next_in,U=E.input,W=E.avail_in,z=l.hold,O=l.bits,q=W,J=tt,F=w;t:for(;;)switch(l.mode){case m:if(l.wrap===0){l.mode=13;break}for(;O<16;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(2&l.wrap&&z===35615){A[l.check=0]=255&z,A[1]=z>>>8&255,l.check=n(l.check,A,2,0),O=z=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&z)<<8)+(z>>8))%31){E.msg="incorrect header check",l.mode=30;break}if((15&z)!=8){E.msg="unknown compression method",l.mode=30;break}if(O-=4,r=8+(15&(z>>>=4)),l.wbits===0)l.wbits=r;else if(r>l.wbits){E.msg="invalid window size",l.mode=30;break}l.dmax=1<<r,E.adler=l.check=1,l.mode=512&z?10:12,O=z=0;break;case 2:for(;O<16;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(l.flags=z,(255&l.flags)!=8){E.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){E.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=z>>8&1),512&l.flags&&(A[0]=255&z,A[1]=z>>>8&255,l.check=n(l.check,A,2,0)),O=z=0,l.mode=3;case 3:for(;O<32;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.head&&(l.head.time=z),512&l.flags&&(A[0]=255&z,A[1]=z>>>8&255,A[2]=z>>>16&255,A[3]=z>>>24&255,l.check=n(l.check,A,4,0)),O=z=0,l.mode=4;case 4:for(;O<16;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.head&&(l.head.xflags=255&z,l.head.os=z>>8),512&l.flags&&(A[0]=255&z,A[1]=z>>>8&255,l.check=n(l.check,A,2,0)),O=z=0,l.mode=5;case 5:if(1024&l.flags){for(;O<16;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.length=z,l.head&&(l.head.extra_len=z),512&l.flags&&(A[0]=255&z,A[1]=z>>>8&255,l.check=n(l.check,A,2,0)),O=z=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(W<(V=l.length)&&(V=W),V&&(l.head&&(r=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),s.arraySet(l.head.extra,U,Z,V,r)),512&l.flags&&(l.check=n(l.check,U,V,Z)),W-=V,Z+=V,l.length-=V),l.length))break t;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(W===0)break t;for(V=0;r=U[Z+V++],l.head&&r&&l.length<65536&&(l.head.name+=String.fromCharCode(r)),r&&V<W;);if(512&l.flags&&(l.check=n(l.check,U,V,Z)),W-=V,Z+=V,r)break t}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(W===0)break t;for(V=0;r=U[Z+V++],l.head&&r&&l.length<65536&&(l.head.comment+=String.fromCharCode(r)),r&&V<W;);if(512&l.flags&&(l.check=n(l.check,U,V,Z)),W-=V,Z+=V,r)break t}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;O<16;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(z!==(65535&l.check)){E.msg="header crc mismatch",l.mode=30;break}O=z=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),E.adler=l.check=0,l.mode=12;break;case 10:for(;O<32;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}E.adler=l.check=p(z),O=z=0,l.mode=11;case 11:if(l.havedict===0)return E.next_out=rt,E.avail_out=tt,E.next_in=Z,E.avail_in=W,l.hold=z,l.bits=O,2;E.adler=l.check=1,l.mode=12;case 12:if(N===5||N===6)break t;case 13:if(l.last){z>>>=7&O,O-=7&O,l.mode=27;break}for(;O<3;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}switch(l.last=1&z,O-=1,3&(z>>>=1)){case 0:l.mode=14;break;case 1:if(H(l),l.mode=20,N!==6)break;z>>>=2,O-=2;break t;case 2:l.mode=17;break;case 3:E.msg="invalid block type",l.mode=30}z>>>=2,O-=2;break;case 14:for(z>>>=7&O,O-=7&O;O<32;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if((65535&z)!=(z>>>16^65535)){E.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&z,O=z=0,l.mode=15,N===6)break t;case 15:l.mode=16;case 16:if(V=l.length){if(W<V&&(V=W),tt<V&&(V=tt),V===0)break t;s.arraySet(et,U,Z,V,rt),W-=V,Z+=V,tt-=V,rt+=V,l.length-=V;break}l.mode=12;break;case 17:for(;O<14;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(l.nlen=257+(31&z),z>>>=5,O-=5,l.ndist=1+(31&z),z>>>=5,O-=5,l.ncode=4+(15&z),z>>>=4,O-=4,286<l.nlen||30<l.ndist){E.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;O<3;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.lens[j[l.have++]]=7&z,z>>>=3,O-=3}for(;l.have<19;)l.lens[j[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,P={bits:l.lenbits},F=d(0,l.lens,0,19,l.lencode,0,l.work,P),l.lenbits=P.bits,F){E.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;st=(_=l.lencode[z&(1<<l.lenbits)-1])>>>16&255,ct=65535&_,!((nt=_>>>24)<=O);){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(ct<16)z>>>=nt,O-=nt,l.lens[l.have++]=ct;else{if(ct===16){for(v=nt+2;O<v;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(z>>>=nt,O-=nt,l.have===0){E.msg="invalid bit length repeat",l.mode=30;break}r=l.lens[l.have-1],V=3+(3&z),z>>>=2,O-=2}else if(ct===17){for(v=nt+3;O<v;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}O-=nt,r=0,V=3+(7&(z>>>=nt)),z>>>=3,O-=3}else{for(v=nt+7;O<v;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}O-=nt,r=0,V=11+(127&(z>>>=nt)),z>>>=7,O-=7}if(l.have+V>l.nlen+l.ndist){E.msg="invalid bit length repeat",l.mode=30;break}for(;V--;)l.lens[l.have++]=r}}if(l.mode===30)break;if(l.lens[256]===0){E.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,P={bits:l.lenbits},F=d(y,l.lens,0,l.nlen,l.lencode,0,l.work,P),l.lenbits=P.bits,F){E.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,P={bits:l.distbits},F=d(b,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,P),l.distbits=P.bits,F){E.msg="invalid distances set",l.mode=30;break}if(l.mode=20,N===6)break t;case 20:l.mode=21;case 21:if(6<=W&&258<=tt){E.next_out=rt,E.avail_out=tt,E.next_in=Z,E.avail_in=W,l.hold=z,l.bits=O,u(E,J),rt=E.next_out,et=E.output,tt=E.avail_out,Z=E.next_in,U=E.input,W=E.avail_in,z=l.hold,O=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;st=(_=l.lencode[z&(1<<l.lenbits)-1])>>>16&255,ct=65535&_,!((nt=_>>>24)<=O);){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(st&&!(240&st)){for(lt=nt,mt=st,pt=ct;st=(_=l.lencode[pt+((z&(1<<lt+mt)-1)>>lt)])>>>16&255,ct=65535&_,!(lt+(nt=_>>>24)<=O);){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}z>>>=lt,O-=lt,l.back+=lt}if(z>>>=nt,O-=nt,l.back+=nt,l.length=ct,st===0){l.mode=26;break}if(32&st){l.back=-1,l.mode=12;break}if(64&st){E.msg="invalid literal/length code",l.mode=30;break}l.extra=15&st,l.mode=22;case 22:if(l.extra){for(v=l.extra;O<v;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.length+=z&(1<<l.extra)-1,z>>>=l.extra,O-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;st=(_=l.distcode[z&(1<<l.distbits)-1])>>>16&255,ct=65535&_,!((nt=_>>>24)<=O);){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(!(240&st)){for(lt=nt,mt=st,pt=ct;st=(_=l.distcode[pt+((z&(1<<lt+mt)-1)>>lt)])>>>16&255,ct=65535&_,!(lt+(nt=_>>>24)<=O);){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}z>>>=lt,O-=lt,l.back+=lt}if(z>>>=nt,O-=nt,l.back+=nt,64&st){E.msg="invalid distance code",l.mode=30;break}l.offset=ct,l.extra=15&st,l.mode=24;case 24:if(l.extra){for(v=l.extra;O<v;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}l.offset+=z&(1<<l.extra)-1,z>>>=l.extra,O-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){E.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(tt===0)break t;if(V=J-tt,l.offset>V){if((V=l.offset-V)>l.whave&&l.sane){E.msg="invalid distance too far back",l.mode=30;break}ht=V>l.wnext?(V-=l.wnext,l.wsize-V):l.wnext-V,V>l.length&&(V=l.length),ft=l.window}else ft=et,ht=rt-l.offset,V=l.length;for(tt<V&&(V=tt),tt-=V,l.length-=V;et[rt++]=ft[ht++],--V;);l.length===0&&(l.mode=21);break;case 26:if(tt===0)break t;et[rt++]=l.length,tt--,l.mode=21;break;case 27:if(l.wrap){for(;O<32;){if(W===0)break t;W--,z|=U[Z++]<<O,O+=8}if(J-=tt,E.total_out+=J,l.total+=J,J&&(E.adler=l.check=l.flags?n(l.check,et,J,rt-J):o(l.check,et,J,rt-J)),J=tt,(l.flags?z:p(z))!==l.check){E.msg="incorrect data check",l.mode=30;break}O=z=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;O<32;){if(W===0)break t;W--,z+=U[Z++]<<O,O+=8}if(z!==(4294967295&l.total)){E.msg="incorrect length check",l.mode=30;break}O=z=0}l.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return c}return E.next_out=rt,E.avail_out=tt,E.next_in=Z,E.avail_in=W,l.hold=z,l.bits=O,(l.wsize||J!==E.avail_out&&l.mode<30&&(l.mode<27||N!==4))&&Q(E,E.output,E.next_out,J-E.avail_out)?(l.mode=31,-4):(q-=E.avail_in,J-=E.avail_out,E.total_in+=q,E.total_out+=J,l.total+=J,l.wrap&&J&&(E.adler=l.check=l.flags?n(l.check,et,J,E.next_out-J):o(l.check,et,J,E.next_out-J)),E.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(q==0&&J===0||N===4)&&F===w&&(F=-5),F)},a.inflateEnd=function(E){if(!E||!E.state)return c;var N=E.state;return N.window&&(N.window=null),E.state=null,w},a.inflateGetHeader=function(E,N){var l;return E&&E.state&&2&(l=E.state).wrap?((l.head=N).done=!1,w):c},a.inflateSetDictionary=function(E,N){var l,U=N.length;return E&&E.state?(l=E.state).wrap!==0&&l.mode!==11?c:l.mode===11&&o(1,N,U,0)!==l.check?-3:Q(E,N,U,U)?(l.mode=31,-4):(l.havedict=1,w):c},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,a){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,b,w,c,m,f,g,p){var k,x,C,S,L,R,T,B,H,Q=p.bits,E=0,N=0,l=0,U=0,et=0,Z=0,rt=0,W=0,tt=0,z=0,O=null,q=0,J=new s.Buf16(16),V=new s.Buf16(16),ht=null,ft=0;for(E=0;E<=15;E++)J[E]=0;for(N=0;N<c;N++)J[b[w+N]]++;for(et=Q,U=15;1<=U&&J[U]===0;U--);if(U<et&&(et=U),U===0)return m[f++]=20971520,m[f++]=20971520,p.bits=1,0;for(l=1;l<U&&J[l]===0;l++);for(et<l&&(et=l),E=W=1;E<=15;E++)if(W<<=1,(W-=J[E])<0)return-1;if(0<W&&(y===0||U!==1))return-1;for(V[1]=0,E=1;E<15;E++)V[E+1]=V[E]+J[E];for(N=0;N<c;N++)b[w+N]!==0&&(g[V[b[w+N]]++]=N);if(R=y===0?(O=ht=g,19):y===1?(O=o,q-=257,ht=n,ft-=257,256):(O=u,ht=d,-1),E=l,L=f,rt=N=z=0,C=-1,S=(tt=1<<(Z=et))-1,y===1&&852<tt||y===2&&592<tt)return 1;for(;;){for(T=E-rt,H=g[N]<R?(B=0,g[N]):g[N]>R?(B=ht[ft+g[N]],O[q+g[N]]):(B=96,0),k=1<<E-rt,l=x=1<<Z;m[L+(z>>rt)+(x-=k)]=T<<24|B<<16|H|0,x!==0;);for(k=1<<E-1;z&k;)k>>=1;if(k!==0?(z&=k-1,z+=k):z=0,N++,--J[E]==0){if(E===U)break;E=b[w+g[N]]}if(et<E&&(z&S)!==C){for(rt===0&&(rt=et),L+=l,W=1<<(Z=E-rt);Z+rt<U&&!((W-=J[Z+rt])<=0);)Z++,W<<=1;if(tt+=1<<Z,y===1&&852<tt||y===2&&592<tt)return 1;m[C=z&S]=et<<24|Z<<16|L-f|0}}return z!==0&&(m[L+z]=E-rt<<24|64<<16|0),p.bits=et,0}},{"../utils/common":41}],51:[function(t,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,a){var s=t("../utils/common"),o=0,n=1;function u(_){for(var A=_.length;0<=--A;)_[A]=0}var d=0,y=29,b=256,w=b+1+y,c=30,m=19,f=2*w+1,g=15,p=16,k=7,x=256,C=16,S=17,L=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(w+2));u(Q);var E=new Array(2*c);u(E);var N=new Array(512);u(N);var l=new Array(256);u(l);var U=new Array(y);u(U);var et,Z,rt,W=new Array(c);function tt(_,A,j,D,I){this.static_tree=_,this.extra_bits=A,this.extra_base=j,this.elems=D,this.max_length=I,this.has_stree=_&&_.length}function z(_,A){this.dyn_tree=_,this.max_code=0,this.stat_desc=A}function O(_){return _<256?N[_]:N[256+(_>>>7)]}function q(_,A){_.pending_buf[_.pending++]=255&A,_.pending_buf[_.pending++]=A>>>8&255}function J(_,A,j){_.bi_valid>p-j?(_.bi_buf|=A<<_.bi_valid&65535,q(_,_.bi_buf),_.bi_buf=A>>p-_.bi_valid,_.bi_valid+=j-p):(_.bi_buf|=A<<_.bi_valid&65535,_.bi_valid+=j)}function V(_,A,j){J(_,j[2*A],j[2*A+1])}function ht(_,A){for(var j=0;j|=1&_,_>>>=1,j<<=1,0<--A;);return j>>>1}function ft(_,A,j){var D,I,M=new Array(g+1),K=0;for(D=1;D<=g;D++)M[D]=K=K+j[D-1]<<1;for(I=0;I<=A;I++){var G=_[2*I+1];G!==0&&(_[2*I]=ht(M[G]++,G))}}function nt(_){var A;for(A=0;A<w;A++)_.dyn_ltree[2*A]=0;for(A=0;A<c;A++)_.dyn_dtree[2*A]=0;for(A=0;A<m;A++)_.bl_tree[2*A]=0;_.dyn_ltree[2*x]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function st(_){8<_.bi_valid?q(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function ct(_,A,j,D){var I=2*A,M=2*j;return _[I]<_[M]||_[I]===_[M]&&D[A]<=D[j]}function lt(_,A,j){for(var D=_.heap[j],I=j<<1;I<=_.heap_len&&(I<_.heap_len&&ct(A,_.heap[I+1],_.heap[I],_.depth)&&I++,!ct(A,D,_.heap[I],_.depth));)_.heap[j]=_.heap[I],j=I,I<<=1;_.heap[j]=D}function mt(_,A,j){var D,I,M,K,G=0;if(_.last_lit!==0)for(;D=_.pending_buf[_.d_buf+2*G]<<8|_.pending_buf[_.d_buf+2*G+1],I=_.pending_buf[_.l_buf+G],G++,D===0?V(_,I,A):(V(_,(M=l[I])+b+1,A),(K=R[M])!==0&&J(_,I-=U[M],K),V(_,M=O(--D),j),(K=T[M])!==0&&J(_,D-=W[M],K)),G<_.last_lit;);V(_,x,A)}function pt(_,A){var j,D,I,M=A.dyn_tree,K=A.stat_desc.static_tree,G=A.stat_desc.has_stree,Y=A.stat_desc.elems,ot=-1;for(_.heap_len=0,_.heap_max=f,j=0;j<Y;j++)M[2*j]!==0?(_.heap[++_.heap_len]=ot=j,_.depth[j]=0):M[2*j+1]=0;for(;_.heap_len<2;)M[2*(I=_.heap[++_.heap_len]=ot<2?++ot:0)]=1,_.depth[I]=0,_.opt_len--,G&&(_.static_len-=K[2*I+1]);for(A.max_code=ot,j=_.heap_len>>1;1<=j;j--)lt(_,M,j);for(I=Y;j=_.heap[1],_.heap[1]=_.heap[_.heap_len--],lt(_,M,1),D=_.heap[1],_.heap[--_.heap_max]=j,_.heap[--_.heap_max]=D,M[2*I]=M[2*j]+M[2*D],_.depth[I]=(_.depth[j]>=_.depth[D]?_.depth[j]:_.depth[D])+1,M[2*j+1]=M[2*D+1]=I,_.heap[1]=I++,lt(_,M,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(it,dt){var xt,gt,Et,ut,Bt,Tt,_t=dt.dyn_tree,$t=dt.max_code,pe=dt.stat_desc.static_tree,me=dt.stat_desc.has_stree,ge=dt.stat_desc.extra_bits,Yt=dt.stat_desc.extra_base,Ct=dt.stat_desc.max_length,Rt=0;for(ut=0;ut<=g;ut++)it.bl_count[ut]=0;for(_t[2*it.heap[it.heap_max]+1]=0,xt=it.heap_max+1;xt<f;xt++)Ct<(ut=_t[2*_t[2*(gt=it.heap[xt])+1]+1]+1)&&(ut=Ct,Rt++),_t[2*gt+1]=ut,$t<gt||(it.bl_count[ut]++,Bt=0,Yt<=gt&&(Bt=ge[gt-Yt]),Tt=_t[2*gt],it.opt_len+=Tt*(ut+Bt),me&&(it.static_len+=Tt*(pe[2*gt+1]+Bt)));if(Rt!==0){do{for(ut=Ct-1;it.bl_count[ut]===0;)ut--;it.bl_count[ut]--,it.bl_count[ut+1]+=2,it.bl_count[Ct]--,Rt-=2}while(0<Rt);for(ut=Ct;ut!==0;ut--)for(gt=it.bl_count[ut];gt!==0;)$t<(Et=it.heap[--xt])||(_t[2*Et+1]!==ut&&(it.opt_len+=(ut-_t[2*Et+1])*_t[2*Et],_t[2*Et+1]=ut),gt--)}}(_,A),ft(M,ot,_.bl_count)}function r(_,A,j){var D,I,M=-1,K=A[1],G=0,Y=7,ot=4;for(K===0&&(Y=138,ot=3),A[2*(j+1)+1]=65535,D=0;D<=j;D++)I=K,K=A[2*(D+1)+1],++G<Y&&I===K||(G<ot?_.bl_tree[2*I]+=G:I!==0?(I!==M&&_.bl_tree[2*I]++,_.bl_tree[2*C]++):G<=10?_.bl_tree[2*S]++:_.bl_tree[2*L]++,M=I,ot=(G=0)===K?(Y=138,3):I===K?(Y=6,3):(Y=7,4))}function F(_,A,j){var D,I,M=-1,K=A[1],G=0,Y=7,ot=4;for(K===0&&(Y=138,ot=3),D=0;D<=j;D++)if(I=K,K=A[2*(D+1)+1],!(++G<Y&&I===K)){if(G<ot)for(;V(_,I,_.bl_tree),--G!=0;);else I!==0?(I!==M&&(V(_,I,_.bl_tree),G--),V(_,C,_.bl_tree),J(_,G-3,2)):G<=10?(V(_,S,_.bl_tree),J(_,G-3,3)):(V(_,L,_.bl_tree),J(_,G-11,7));M=I,ot=(G=0)===K?(Y=138,3):I===K?(Y=6,3):(Y=7,4)}}u(W);var P=!1;function v(_,A,j,D){J(_,(d<<1)+(D?1:0),3),function(I,M,K,G){st(I),G&&(q(I,K),q(I,~K)),s.arraySet(I.pending_buf,I.window,M,K,I.pending),I.pending+=K}(_,A,j,!0)}a._tr_init=function(_){P||(function(){var A,j,D,I,M,K=new Array(g+1);for(I=D=0;I<y-1;I++)for(U[I]=D,A=0;A<1<<R[I];A++)l[D++]=I;for(l[D-1]=I,I=M=0;I<16;I++)for(W[I]=M,A=0;A<1<<T[I];A++)N[M++]=I;for(M>>=7;I<c;I++)for(W[I]=M<<7,A=0;A<1<<T[I]-7;A++)N[256+M++]=I;for(j=0;j<=g;j++)K[j]=0;for(A=0;A<=143;)Q[2*A+1]=8,A++,K[8]++;for(;A<=255;)Q[2*A+1]=9,A++,K[9]++;for(;A<=279;)Q[2*A+1]=7,A++,K[7]++;for(;A<=287;)Q[2*A+1]=8,A++,K[8]++;for(ft(Q,w+1,K),A=0;A<c;A++)E[2*A+1]=5,E[2*A]=ht(A,5);et=new tt(Q,R,b+1,w,g),Z=new tt(E,T,0,c,g),rt=new tt(new Array(0),B,0,m,k)}(),P=!0),_.l_desc=new z(_.dyn_ltree,et),_.d_desc=new z(_.dyn_dtree,Z),_.bl_desc=new z(_.bl_tree,rt),_.bi_buf=0,_.bi_valid=0,nt(_)},a._tr_stored_block=v,a._tr_flush_block=function(_,A,j,D){var I,M,K=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(G){var Y,ot=4093624447;for(Y=0;Y<=31;Y++,ot>>>=1)if(1&ot&&G.dyn_ltree[2*Y]!==0)return o;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return n;for(Y=32;Y<b;Y++)if(G.dyn_ltree[2*Y]!==0)return n;return o}(_)),pt(_,_.l_desc),pt(_,_.d_desc),K=function(G){var Y;for(r(G,G.dyn_ltree,G.l_desc.max_code),r(G,G.dyn_dtree,G.d_desc.max_code),pt(G,G.bl_desc),Y=m-1;3<=Y&&G.bl_tree[2*H[Y]+1]===0;Y--);return G.opt_len+=3*(Y+1)+5+5+4,Y}(_),I=_.opt_len+3+7>>>3,(M=_.static_len+3+7>>>3)<=I&&(I=M)):I=M=j+5,j+4<=I&&A!==-1?v(_,A,j,D):_.strategy===4||M===I?(J(_,2+(D?1:0),3),mt(_,Q,E)):(J(_,4+(D?1:0),3),function(G,Y,ot,it){var dt;for(J(G,Y-257,5),J(G,ot-1,5),J(G,it-4,4),dt=0;dt<it;dt++)J(G,G.bl_tree[2*H[dt]+1],3);F(G,G.dyn_ltree,Y-1),F(G,G.dyn_dtree,ot-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,K+1),mt(_,_.dyn_ltree,_.dyn_dtree)),nt(_),D&&st(_)},a._tr_tally=function(_,A,j){return _.pending_buf[_.d_buf+2*_.last_lit]=A>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&A,_.pending_buf[_.l_buf+_.last_lit]=255&j,_.last_lit++,A===0?_.dyn_ltree[2*j]++:(_.matches++,A--,_.dyn_ltree[2*(l[j]+b+1)]++,_.dyn_dtree[2*O(A)]++),_.last_lit===_.lit_bufsize-1},a._tr_align=function(_){J(_,2,3),V(_,x,Q),function(A){A.bi_valid===16?(q(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(t,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,a){(function(s){(function(o,n){if(!o.setImmediate){var u,d,y,b,w=1,c={},m=!1,f=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,u={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){k(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,S=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=S,C}}()?(b="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",x,!1):o.attachEvent("onmessage",x),function(C){o.postMessage(b+C,"*")}):o.MessageChannel?((y=new MessageChannel).port1.onmessage=function(C){k(C.data)},function(C){y.port2.postMessage(C)}):f&&"onreadystatechange"in f.createElement("script")?(d=f.documentElement,function(C){var S=f.createElement("script");S.onreadystatechange=function(){k(C),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}):function(C){setTimeout(k,0,C)},g.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var S=new Array(arguments.length-1),L=0;L<S.length;L++)S[L]=arguments[L+1];var R={callback:C,args:S};return c[w]=R,u(w),w++},g.clearImmediate=p}function p(C){delete c[C]}function k(C){if(m)setTimeout(k,0,C);else{var S=c[C];if(S){m=!0;try{(function(L){var R=L.callback,T=L.args;switch(T.length){case 0:R();break;case 1:R(T[0]);break;case 2:R(T[0],T[1]);break;case 3:R(T[0],T[1],T[2]);break;default:R.apply(n,T)}})(S)}finally{p(C),m=!1}}}}function x(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(b)===0&&k(+C.data.slice(b.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Nt<"u"?Nt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ae);var Ee=ae.exports;const Ce=be(Ee),Ae=typeof __VERSION__<"u"?__VERSION__:"latest",Se={id:"zip",module:"zip",name:"Zip Archive",version:Ae,extensions:["zip"],mimeTypes:["application/zip"],category:"archive",tests:["PK"],options:{},parse:Ie};async function Ie(h){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=[],i={};try{const a=new Ce;return(await a.loadAsync(h,e)).forEach((o,n)=>{const u=n.name,d=Oe(a,u,e).then(y=>{i[o]=y});t.push(d)}),await Promise.all(t),i}catch(a){throw e.log.error(`Unable to read zip archive: ${a}`),a}}async function Oe(h,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{return await h.file(e).async(t.dataType||"arraybuffer")}catch(i){return t.log.error(`Unable to read ${e} from zip archive: ${i}`),i}}function ze(h){try{let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return async function*(){const t=new TextDecoder(void 0,e);for await(const i of h)yield typeof i=="string"?i:t.decode(i,{stream:!0})}()}catch(e){return Promise.reject(e)}}const Pe=async(h,e)=>{const t=h.body.getReader(),i=+h.headers.get("Content-Length");let a=0,s=[];for(;;){const{done:u,value:d}=await t.read();if(u)break;s.push(d),a+=d.length,e&&e(~~(a/i*100))}let o=new Uint8Array(a),n=0;for(let u of s)o.set(u,n),n+=u.length;return o},Be=async(h,e,t)=>{const i=await we(h),a=h.split("/"),s=a[a.length-1],o=Pe(i,function(y){t&&t({fileName:s,rate:y})}),n=await ve(o,Se),u=await Object.keys(n);let d=[];for(let y=0;y<u.length;y++){const b=await ke(n[u[y]],e);d.push(b)}return d},qt=100;class Re{constructor(e,t){if(this.schema=void 0,this.options=void 0,this.length=0,this.rows=null,this.cursor=0,this._headers=[],this.options=t,this.schema=e,!Array.isArray(e)){this._headers=[];for(const i in e)this._headers[e[i].index]=e[i].name}}rowCount(){return this.length}addArrayRow(e,t){Number.isFinite(t)&&(this.cursor=t),this.rows=this.rows||new Array(qt),this.rows[this.length]=e,this.length++}addObjectRow(e,t){Number.isFinite(t)&&(this.cursor=t),this.rows=this.rows||new Array(qt),this.rows[this.length]=e,this.length++}getBatch(){let e=this.rows;return e?(e=e.slice(0,this.length),this.rows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function Ne(h,e){if(!h)throw new Error("null row");if(!e)throw new Error("no headers");const t={};for(let i=0;i<e.length;i++)t[e[i]]=h[i];return t}function Le(h,e){if(!h)throw new Error("null row");if(!e)throw new Error("no headers");const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=h[e[i]];return t}const Qt=100;class Fe{constructor(e,t){if(this.schema=void 0,this.options=void 0,this.length=0,this.objectRows=null,this.arrayRows=null,this.cursor=0,this._headers=[],this.options=t,this.schema=e,!Array.isArray(e)){this._headers=[];for(const i in e)this._headers[e[i].index]=e[i].name}}rowCount(){return this.length}addArrayRow(e,t){switch(Number.isFinite(t)&&(this.cursor=t),this.options.shape){case"object-row-table":const i=Ne(e,this._headers);this.addObjectRow(i,t);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(Qt),this.arrayRows[this.length]=e,this.length++;break}}addObjectRow(e,t){switch(Number.isFinite(t)&&(this.cursor=t),this.options.shape){case"array-row-table":const i=Le(e,this._headers);this.addArrayRow(i,t);break;case"object-row-table":this.objectRows=this.objectRows||new Array(Qt),this.objectRows[this.length]=e,this.length++;break}}getBatch(){let e=this.arrayRows||this.objectRows;return e?(e=e.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const Ue=100;class je{constructor(e,t){this.schema=void 0,this.length=0,this.allocated=0,this.columns={},this.schema=e,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(e){this._reallocateColumns();let t=0;for(const i in this.columns)this.columns[i][this.length]=e[t++];this.length++}addObjectRow(e){this._reallocateColumns();for(const t in e)this.columns[t][this.length]=e[t];this.length++}getBatch(){this._pruneColumns();const e=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const i in this.schema){const a=this.schema[i];e[a.name]=this.columns[a.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:e,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:Ue,this.columns={};for(const e in this.schema){const t=this.schema[e],i=t.type||Float32Array,a=this.columns[t.index];if(a&&ArrayBuffer.isView(a)){const s=new i(this.allocated);s.set(a),this.columns[t.index]=s}else a?(a.length=this.allocated,this.columns[t.index]=a):this.columns[t.index]=new i(this.allocated)}}}_pruneColumns(){for(const[e,t]of Object.entries(this.columns))this.columns[e]=t.slice(0,this.length)}}const De={shape:"array-row-table",batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},te="TableBatchBuilder";class St{constructor(e,t){this.schema=void 0,this.options=void 0,this.aggregator=null,this.batchCount=0,this.bytesUsed=0,this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),this.totalLength=0,this.totalBytes=0,this.rowBytes=0,this.schema=e,this.options={...De,...t}}limitReached(){var e,t;return!!(!((e=this.options)===null||e===void 0)&&e.limit&&this.totalLength>=this.options.limit||!((t=this.options)===null||t===void 0)&&t._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(e){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(e),this.totalBytes+=this.rowBytes,Array.isArray(e)?this.addArrayRow(e):this.addObjectRow(e))}addArrayRow(e){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addArrayRow(e)}addObjectRow(e){if(!this.aggregator){const t=this._getTableBatchType();this.aggregator=new t(this.schema,this.options)}this.aggregator.addObjectRow(e)}chunkComplete(e){e instanceof ArrayBuffer&&(this.bytesUsed+=e.byteLength),typeof e=="string"&&(this.bytesUsed+=e.length),this.isChunkComplete=!0}getFullBatch(e){return this._isFull()?this._getBatch(e):null}getFinalBatch(e){return this._getBatch(e)}_estimateRowMB(e){return Array.isArray(e)?e.length*8:Object.keys(e).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(e){if(!this.aggregator)return null;e!=null&&e.bytesUsed&&(this.bytesUsed=e.bytesUsed);const t=this.aggregator.getBatch();return t.count=this.batchCount,t.bytesUsed=this.bytesUsed,Object.assign(t,e),this.batchCount++,this.aggregator=null,t}_getTableBatchType(){switch(this.options.shape){case"row-table":return Re;case"array-row-table":case"object-row-table":return Fe;case"columnar-table":return je;case"arrow-table":if(!St.ArrowBatch)throw new Error(te);return St.ArrowBatch;default:throw new Error(te)}}}St.ArrowBatch=void 0;const Gt=Number.MAX_SAFE_INTEGER;var $=function(h){return h[h.BEGIN=0]="BEGIN",h[h.VALUE=1]="VALUE",h[h.OPEN_OBJECT=2]="OPEN_OBJECT",h[h.CLOSE_OBJECT=3]="CLOSE_OBJECT",h[h.OPEN_ARRAY=4]="OPEN_ARRAY",h[h.CLOSE_ARRAY=5]="CLOSE_ARRAY",h[h.TEXT_ESCAPE=6]="TEXT_ESCAPE",h[h.STRING=7]="STRING",h[h.BACKSLASH=8]="BACKSLASH",h[h.END=9]="END",h[h.OPEN_KEY=10]="OPEN_KEY",h[h.CLOSE_KEY=11]="CLOSE_KEY",h[h.TRUE=12]="TRUE",h[h.TRUE2=13]="TRUE2",h[h.TRUE3=14]="TRUE3",h[h.FALSE=15]="FALSE",h[h.FALSE2=16]="FALSE2",h[h.FALSE3=17]="FALSE3",h[h.FALSE4=18]="FALSE4",h[h.NULL=19]="NULL",h[h.NULL2=20]="NULL2",h[h.NULL3=21]="NULL3",h[h.NUMBER_DECIMAL_POINT=22]="NUMBER_DECIMAL_POINT",h[h.NUMBER_DIGIT=23]="NUMBER_DIGIT",h}($||{});const X={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125},ee=/[\\"\n]/g,re={onready:()=>{},onopenobject:()=>{},onkey:()=>{},oncloseobject:()=>{},onopenarray:()=>{},onclosearray:()=>{},onvalue:()=>{},onerror:()=>{},onend:()=>{},onchunkparsed:()=>{}};class Te{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=re,this.bufferCheckPosition=Gt,this.q="",this.c="",this.p="",this.closed=!1,this.closedRoot=!1,this.sawRoot=!1,this.error=null,this.state=$.BEGIN,this.stack=[],this.position=0,this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,this.depth=0,this.textNode=void 0,this.numberNode=void 0,this.options={...re,...e},this.textNode=void 0,this.numberNode="",this.emit("onready")}end(){return(this.state!==$.VALUE||this.depth!==0)&&this._error("Unexpected end"),this._closeValue(),this.c="",this.closed=!0,this.emit("onend"),this}resume(){return this.error=null,this}close(){return this.write(null)}emit(e,t){var i,a;(i=(a=this.options)[e])===null||i===void 0||i.call(a,t,this)}emitNode(e,t){this._closeValue(),this.emit(e,t)}write(e){if(this.error)throw this.error;if(this.closed)return this._error("Cannot write after close. Assign an onready handler.");if(e===null)return this.end();let t=0,i=e.charCodeAt(0),a=this.p;for(;i&&(a=i,this.c=i=e.charCodeAt(t++),a!==i?this.p=a:a=this.p,!!i);)switch(this.position++,i===X.lineFeed?(this.line++,this.column=0):this.column++,this.state){case $.BEGIN:i===X.openBrace?this.state=$.OPEN_OBJECT:i===X.openBracket?this.state=$.OPEN_ARRAY:At(i)||this._error("Non-whitespace before {[.");continue;case $.OPEN_KEY:case $.OPEN_OBJECT:if(At(i))continue;if(this.state===$.OPEN_KEY)this.stack.push($.CLOSE_KEY);else if(i===X.closeBrace){this.emit("onopenobject"),this.depth++,this.emit("oncloseobject"),this.depth--,this.state=this.stack.pop()||$.VALUE;continue}else this.stack.push($.CLOSE_OBJECT);i===X.doubleQuote?this.state=$.STRING:this._error('Malformed object key should start with "');continue;case $.CLOSE_KEY:case $.CLOSE_OBJECT:if(At(i))continue;i===X.colon?(this.state===$.CLOSE_OBJECT?(this.stack.push($.CLOSE_OBJECT),this._closeValue("onopenobject"),this.depth++):this._closeValue("onkey"),this.state=$.VALUE):i===X.closeBrace?(this.emitNode("oncloseobject"),this.depth--,this.state=this.stack.pop()||$.VALUE):i===X.comma?(this.state===$.CLOSE_OBJECT&&this.stack.push($.CLOSE_OBJECT),this._closeValue(),this.state=$.OPEN_KEY):this._error("Bad object");continue;case $.OPEN_ARRAY:case $.VALUE:if(At(i))continue;if(this.state===$.OPEN_ARRAY)if(this.emit("onopenarray"),this.depth++,this.state=$.VALUE,i===X.closeBracket){this.emit("onclosearray"),this.depth--,this.state=this.stack.pop()||$.VALUE;continue}else this.stack.push($.CLOSE_ARRAY);i===X.doubleQuote?this.state=$.STRING:i===X.openBrace?this.state=$.OPEN_OBJECT:i===X.openBracket?this.state=$.OPEN_ARRAY:i===X.t?this.state=$.TRUE:i===X.f?this.state=$.FALSE:i===X.n?this.state=$.NULL:i===X.minus?this.numberNode+="-":X._0<=i&&i<=X._9?(this.numberNode+=String.fromCharCode(i),this.state=$.NUMBER_DIGIT):this._error("Bad value");continue;case $.CLOSE_ARRAY:if(i===X.comma)this.stack.push($.CLOSE_ARRAY),this._closeValue("onvalue"),this.state=$.VALUE;else if(i===X.closeBracket)this.emitNode("onclosearray"),this.depth--,this.state=this.stack.pop()||$.VALUE;else{if(At(i))continue;this._error("Bad array")}continue;case $.STRING:this.textNode===void 0&&(this.textNode="");let s=t-1,o=this.slashed,n=this.unicodeI;t:for(;;){for(;n>0;)if(this.unicodeS+=String.fromCharCode(i),i=e.charCodeAt(t++),this.position++,n===4?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),n=0,s=t-1):n++,!i)break t;if(i===X.doubleQuote&&!o){this.state=this.stack.pop()||$.VALUE,this.textNode+=e.substring(s,t-1),this.position+=t-1-s;break}if(i===X.backslash&&!o&&(o=!0,this.textNode+=e.substring(s,t-1),this.position+=t-1-s,i=e.charCodeAt(t++),this.position++,!i))break;if(o){if(o=!1,i===X.n?this.textNode+=`
`:i===X.r?this.textNode+="\r":i===X.t?this.textNode+="	":i===X.f?this.textNode+="\f":i===X.b?this.textNode+="\b":i===X.u?(n=1,this.unicodeS=""):this.textNode+=String.fromCharCode(i),i=e.charCodeAt(t++),this.position++,s=t-1,i)continue;break}ee.lastIndex=t;const u=ee.exec(e);if(u===null){t=e.length+1,this.textNode+=e.substring(s,t-1),this.position+=t-1-s;break}if(t=u.index+1,i=e.charCodeAt(u.index),!i){this.textNode+=e.substring(s,t-1),this.position+=t-1-s;break}}this.slashed=o,this.unicodeI=n;continue;case $.TRUE:i===X.r?this.state=$.TRUE2:this._error(`Invalid true started with t${i}`);continue;case $.TRUE2:i===X.u?this.state=$.TRUE3:this._error(`Invalid true started with tr${i}`);continue;case $.TRUE3:i===X.e?(this.emit("onvalue",!0),this.state=this.stack.pop()||$.VALUE):this._error(`Invalid true started with tru${i}`);continue;case $.FALSE:i===X.a?this.state=$.FALSE2:this._error(`Invalid false started with f${i}`);continue;case $.FALSE2:i===X.l?this.state=$.FALSE3:this._error(`Invalid false started with fa${i}`);continue;case $.FALSE3:i===X.s?this.state=$.FALSE4:this._error(`Invalid false started with fal${i}`);continue;case $.FALSE4:i===X.e?(this.emit("onvalue",!1),this.state=this.stack.pop()||$.VALUE):this._error(`Invalid false started with fals${i}`);continue;case $.NULL:i===X.u?this.state=$.NULL2:this._error(`Invalid null started with n${i}`);continue;case $.NULL2:i===X.l?this.state=$.NULL3:this._error(`Invalid null started with nu${i}`);continue;case $.NULL3:i===X.l?(this.emit("onvalue",null),this.state=this.stack.pop()||$.VALUE):this._error(`Invalid null started with nul${i}`);continue;case $.NUMBER_DECIMAL_POINT:i===X.period?(this.numberNode+=".",this.state=$.NUMBER_DIGIT):this._error("Leading zero not followed by .");continue;case $.NUMBER_DIGIT:X._0<=i&&i<=X._9?this.numberNode+=String.fromCharCode(i):i===X.period?(this.numberNode.indexOf(".")!==-1&&this._error("Invalid number has two dots"),this.numberNode+="."):i===X.e||i===X.E?((this.numberNode.indexOf("e")!==-1||this.numberNode.indexOf("E")!==-1)&&this._error("Invalid number has two exponential"),this.numberNode+="e"):i===X.plus||i===X.minus?(a===X.e||a===X.E||this._error("Invalid symbol in number"),this.numberNode+=String.fromCharCode(i)):(this._closeNumber(),t--,this.state=this.stack.pop()||$.VALUE);continue;default:this._error(`Unknown state: ${this.state}`)}return this.position>=this.bufferCheckPosition&&Ze(this),this.emit("onchunkparsed"),this}_closeValue(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"onvalue";this.textNode!==void 0&&this.emit(e,this.textNode),this.textNode=void 0}_closeNumber(){this.numberNode&&this.emit("onvalue",parseFloat(this.numberNode)),this.numberNode=""}_error(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this._closeValue(),e+=`
Line: ${this.line}
Column: ${this.column}
Char: ${this.c}`;const t=new Error(e);this.error=t,this.emit("onerror",t)}}function At(h){return h===X.carriageReturn||h===X.lineFeed||h===X.space||h===X.tab}function Ze(h){const e=Math.max(Gt,10);let t=0;for(const i of["textNode","numberNode"]){const a=h[i]===void 0?0:h[i].length;if(a>e)switch(i){case"text":break;default:h._error(`Max buffer length exceeded: ${i}`)}t=Math.max(t,a)}h.bufferCheckPosition=Gt-t+h.position}class bt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.path=void 0,this.path=["$"],e instanceof bt){this.path=[...e.path];return}if(Array.isArray(e)){this.path.push(...e);return}if(typeof e=="string"&&(this.path=e.split("."),this.path[0]!=="$"))throw new Error("JSONPaths must start with $")}clone(){return new bt(this)}toString(){return this.path.join(".")}push(e){this.path.push(e)}pop(){return this.path.pop()}set(e){this.path[this.path.length-1]=e}equals(e){if(!this||!e||this.path.length!==e.path.length)return!1;for(let t=0;t<this.path.length;++t)if(this.path[t]!==e.path[t])return!1;return!0}setFieldAtPath(e,t){const i=[...this.path];i.shift();const a=i.pop();for(const s of i)e=e[s];e[a]=t}getFieldAtPath(e){const t=[...this.path];t.shift();const i=t.pop();for(const a of t)e=e[a];return e[i]}}class We{constructor(e){this.parser=void 0,this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new bt,this.reset(),this.parser=new Te({onready:()=>{this.jsonpath=new bt,this.previousStates.length=0,this.currentState.container.length=0},onopenobject:t=>{this._openObject({}),typeof t<"u"&&this.parser.emit("onkey",t)},onkey:t=>{this.jsonpath.set(t),this.currentState.key=t},oncloseobject:()=>{this._closeObject()},onopenarray:()=>{this._openArray()},onclosearray:()=>{this._closeArray()},onvalue:t=>{this._pushOrSet(t)},onerror:t=>{throw t},onend:()=>{this.result=this.currentState.container.pop()},...e})}reset(){this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new bt}write(e){this.parser.write(e)}close(){this.parser.close()}_pushOrSet(e){const{container:t,key:i}=this.currentState;i!==null?(t[i]=e,this.currentState.key=null):t.push(e)}_openArray(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.jsonpath.push(null),this._pushOrSet(e),this.previousStates.push(this.currentState),this.currentState={container:e,isArray:!0,key:null}}_closeArray(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}_openObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.jsonpath.push(null),this._pushOrSet(e),this.previousStates.push(this.currentState),this.currentState={container:e,isArray:!1,key:null}}_closeObject(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}}class Me extends We{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super({onopenarray:()=>{if(!this.streamingArray&&this._matchJSONPath()){this.streamingJsonPath=this.getJsonPath().clone(),this.streamingArray=[],this._openArray(this.streamingArray);return}this._openArray()},onopenobject:i=>{this.topLevelObject?this._openObject({}):(this.topLevelObject={},this._openObject(this.topLevelObject)),typeof i<"u"&&this.parser.emit("onkey",i)}}),this.jsonPaths=void 0,this.streamingJsonPath=null,this.streamingArray=null,this.topLevelObject=null;const t=e.jsonpaths||[];this.jsonPaths=t.map(i=>new bt(i))}write(e){super.write(e);let t=[];return this.streamingArray&&(t=[...this.streamingArray],this.streamingArray.length=0),t}getPartialResult(){return this.topLevelObject}getStreamingJsonPath(){return this.streamingJsonPath}getStreamingJsonPathAsString(){return this.streamingJsonPath&&this.streamingJsonPath.toString()}getJsonPath(){return this.jsonpath}_matchJSONPath(){const e=this.getJsonPath();if(this.jsonPaths.length===0)return!0;for(const t of this.jsonPaths)if(t.equals(e))return!0;return!1}}async function*Ge(h,e){var t;const i=ze(h),{metadata:a}=e,{jsonpaths:s}=e.json||{};let o=!0;const n=null,u=(e==null||(t=e.json)===null||t===void 0?void 0:t.shape)||"object-row-table",d=new St(n,{...e,shape:u}),y=new Me({jsonpaths:s});for await(const c of i){const m=y.write(c),f=m.length>0&&y.getStreamingJsonPathAsString();m.length>0&&o&&(a&&(yield{shape:u,batchType:"partial-result",data:[],length:0,bytesUsed:0,container:y.getPartialResult(),jsonpath:f}),o=!1);for(const p of m){d.addRow(p);const k=d.getFullBatch({jsonpath:f});k&&(yield k)}d.chunkComplete(c);const g=d.getFullBatch({jsonpath:f});g&&(yield g)}const b=y.getStreamingJsonPathAsString(),w=d.getFinalBatch({jsonpath:b});w&&(yield w),a&&(yield{shape:u,batchType:"final-result",container:y.getPartialResult(),jsonpath:y.getStreamingJsonPathAsString(),data:[],length:0})}const jt={x:0,y:1,z:2};function he(h,e={}){const{start:t=0,end:i=h.length,plane:a="xy"}=e,s=e.size||2;let o=0;const n=jt[a[0]],u=jt[a[1]];for(let d=t,y=i-s;d<i;d+=s)o+=(h[d+n]-h[y+n])*(h[d+u]+h[y+u]),y=d;return o/2}function He(h,e,t=2,i,a="xy"){const s=e&&e.length,o=s?e[0]*t:h.length;let n=le(h,0,o,t,!0,i&&i[0],a);const u=[];if(!n||n.next===n.prev)return u;let d,y,b,w,c,m,f;if(s&&(n=Ye(h,e,n,t,i,a)),h.length>80*t){w=y=h[0],c=b=h[1];for(let g=t;g<o;g+=t)m=h[g],f=h[g+1],m<w&&(w=m),f<c&&(c=f),m>y&&(y=m),f>b&&(b=f);d=Math.max(y-w,b-c),d=d!==0?32767/d:0}return It(n,u,t,w,c,d,0),u}function le(h,e,t,i,a,s,o){let n,u;s===void 0&&(s=he(h,{start:e,end:t,size:i,plane:o}));let d=jt[o[0]],y=jt[o[1]];if(a===s<0)for(n=e;n<t;n+=i)u=ne(n,h[n+d],h[n+y],u);else for(n=t-i;n>=e;n-=i)u=ne(n,h[n+d],h[n+y],u);return u&&Dt(u,u.next)&&(zt(u),u=u.next),u}function wt(h,e){if(!h)return h;e||(e=h);let t=h,i;do if(i=!1,!t.steiner&&(Dt(t,t.next)||at(t.prev,t,t.next)===0)){if(zt(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function It(h,e,t,i,a,s,o){if(!h)return;!o&&s&&er(h,i,a,s);let n=h,u,d;for(;h.prev!==h.next;){if(u=h.prev,d=h.next,s?Je(h,i,a,s):Ve(h)){e.push(u.i/t|0),e.push(h.i/t|0),e.push(d.i/t|0),zt(h),h=d.next,n=d.next;continue}if(h=d,h===n){o?o===1?(h=Ke(wt(h),e,t),It(h,e,t,i,a,s,2)):o===2&&$e(h,e,t,i,a,s):It(wt(h),e,t,i,a,s,1);break}}}function Ve(h){const e=h.prev,t=h,i=h.next;if(at(e,t,i)>=0)return!1;const a=e.x,s=t.x,o=i.x,n=e.y,u=t.y,d=i.y,y=a<s?a<o?a:o:s<o?s:o,b=n<u?n<d?n:d:u<d?u:d,w=a>s?a>o?a:o:s>o?s:o,c=n>u?n>d?n:d:u>d?u:d;let m=i.next;for(;m!==e;){if(m.x>=y&&m.x<=w&&m.y>=b&&m.y<=c&&kt(a,n,s,u,o,d,m.x,m.y)&&at(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Je(h,e,t,i){const a=h.prev,s=h,o=h.next;if(at(a,s,o)>=0)return!1;const n=a.x,u=s.x,d=o.x,y=a.y,b=s.y,w=o.y,c=n<u?n<d?n:d:u<d?u:d,m=y<b?y<w?y:w:b<w?b:w,f=n>u?n>d?n:d:u>d?u:d,g=y>b?y>w?y:w:b>w?b:w,p=Ht(c,m,e,t,i),k=Ht(f,g,e,t,i);let x=h.prevZ,C=h.nextZ;for(;x&&x.z>=p&&C&&C.z<=k;){if(x.x>=c&&x.x<=f&&x.y>=m&&x.y<=g&&x!==a&&x!==o&&kt(n,y,u,b,d,w,x.x,x.y)&&at(x.prev,x,x.next)>=0||(x=x.prevZ,C.x>=c&&C.x<=f&&C.y>=m&&C.y<=g&&C!==a&&C!==o&&kt(n,y,u,b,d,w,C.x,C.y)&&at(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;x&&x.z>=p;){if(x.x>=c&&x.x<=f&&x.y>=m&&x.y<=g&&x!==a&&x!==o&&kt(n,y,u,b,d,w,x.x,x.y)&&at(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;C&&C.z<=k;){if(C.x>=c&&C.x<=f&&C.y>=m&&C.y<=g&&C!==a&&C!==o&&kt(n,y,u,b,d,w,C.x,C.y)&&at(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Ke(h,e,t){let i=h;do{const a=i.prev,s=i.next.next;!Dt(a,s)&&ue(a,i,i.next,s)&&Ot(a,s)&&Ot(s,a)&&(e.push(a.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),zt(i),zt(i.next),i=h=s),i=i.next}while(i!==h);return wt(i)}function $e(h,e,t,i,a,s){let o=h;do{let n=o.next.next;for(;n!==o.prev;){if(o.i!==n.i&&ir(o,n)){let u=ce(o,n);o=wt(o,o.next),u=wt(u,u.next),It(o,e,t,i,a,s,0),It(u,e,t,i,a,s,0);return}n=n.next}o=o.next}while(o!==h)}function Ye(h,e,t,i,a,s){const o=[];let n,u,d,y,b;for(n=0,u=e.length;n<u;n++)d=e[n]*i,y=n<u-1?e[n+1]*i:h.length,b=le(h,d,y,i,!1,a&&a[n+1],s),b===b.next&&(b.steiner=!0),o.push(nr(b));for(o.sort(Xe),n=0;n<o.length;n++)t=qe(o[n],t);return t}function Xe(h,e){return h.x-e.x}function qe(h,e){const t=Qe(h,e);if(!t)return e;const i=ce(t,h);return wt(i,i.next),wt(t,t.next)}function Qe(h,e){let t=e;const i=h.x,a=h.y;let s=-1/0,o;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const w=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(w<=i&&w>s&&(s=w,o=t.x<t.next.x?t:t.next,w===i))return o}t=t.next}while(t!==e);if(!o)return null;const n=o,u=o.x,d=o.y;let y=1/0,b;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&kt(a<d?i:s,a,u,d,a<d?s:i,a,t.x,t.y)&&(b=Math.abs(a-t.y)/(i-t.x),Ot(t,h)&&(b<y||b===y&&(t.x>o.x||t.x===o.x&&tr(o,t)))&&(o=t,y=b)),t=t.next;while(t!==n);return o}function tr(h,e){return at(h.prev,h,e.prev)<0&&at(e.next,h,h.next)<0}function er(h,e,t,i){let a=h;do a.z===0&&(a.z=Ht(a.x,a.y,e,t,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==h);a.prevZ.nextZ=null,a.prevZ=null,rr(a)}function rr(h){let e,t,i=1,a,s,o,n,u,d;do{for(s=h,h=null,d=null,a=0;s;){for(a++,n=s,o=0,t=0;t<i&&(o++,n=n.nextZ,!!n);t++);for(u=i;o>0||u>0&&n;)o!==0&&(u===0||!n||s.z<=n.z)?(e=s,s=s.nextZ,o--):(e=n,n=n.nextZ,u--),d?d.nextZ=e:h=e,e.prevZ=d,d=e;s=n}d.nextZ=null,i*=2}while(a>1);return h}function Ht(h,e,t,i,a){return h=(h-t)*a|0,e=(e-i)*a|0,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,h|e<<1}function nr(h){let e=h,t=h;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==h);return t}function kt(h,e,t,i,a,s,o,n){return(a-o)*(e-n)>=(h-o)*(s-n)&&(h-o)*(i-n)>=(t-o)*(e-n)&&(t-o)*(s-n)>=(a-o)*(i-n)}function ir(h,e){return h.next.i!==e.i&&h.prev.i!==e.i&&!sr(h,e)&&(Ot(h,e)&&Ot(e,h)&&or(h,e)&&(at(h.prev,h,e.prev)||at(h,e.prev,e))||Dt(h,e)&&at(h.prev,h,h.next)>0&&at(e.prev,e,e.next)>0)}function at(h,e,t){return(e.y-h.y)*(t.x-e.x)-(e.x-h.x)*(t.y-e.y)}function Dt(h,e){return h.x===e.x&&h.y===e.y}function ue(h,e,t,i){const a=Ut(at(h,e,t)),s=Ut(at(h,e,i)),o=Ut(at(t,i,h)),n=Ut(at(t,i,e));return!!(a!==s&&o!==n||a===0&&Ft(h,t,e)||s===0&&Ft(h,i,e)||o===0&&Ft(t,h,i)||n===0&&Ft(t,e,i))}function Ft(h,e,t){return e.x<=Math.max(h.x,t.x)&&e.x>=Math.min(h.x,t.x)&&e.y<=Math.max(h.y,t.y)&&e.y>=Math.min(h.y,t.y)}function Ut(h){return h>0?1:h<0?-1:0}function sr(h,e){let t=h;do{if(t.i!==h.i&&t.next.i!==h.i&&t.i!==e.i&&t.next.i!==e.i&&ue(t,t.next,h,e))return!0;t=t.next}while(t!==h);return!1}function Ot(h,e){return at(h.prev,h,h.next)<0?at(h,e,h.next)>=0&&at(h,h.prev,e)>=0:at(h,e,h.prev)<0||at(h,h.next,e)<0}function or(h,e){let t=h,i=!1;const a=(h.x+e.x)/2,s=(h.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==h);return i}function ce(h,e){const t=new Vt(h.i,h.x,h.y),i=new Vt(e.i,e.x,e.y),a=h.next,s=e.prev;return h.next=e,e.prev=h,t.next=a,a.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function ne(h,e,t,i){const a=new Vt(h,e,t);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function zt(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}class Vt{constructor(e,t,i){yt(this,"i",void 0),yt(this,"x",void 0),yt(this,"y",void 0),yt(this,"prev",null),yt(this,"next",null),yt(this,"z",0),yt(this,"prevZ",null),yt(this,"nextZ",null),yt(this,"steiner",!1),this.i=e,this.x=t,this.y=i}}function ar(h,e,t){const i=hr(h),a=Object.keys(i).filter(s=>i[s]!==Array);return lr(h,{propArrayTypes:i,...e},{numericPropKeys:t&&t.numericPropKeys||a,PositionDataType:t?t.PositionDataType:Float32Array,triangulate:t?t.triangulate:!0})}function hr(h){const e={};for(const t of h)if(t.properties)for(const i in t.properties){const a=t.properties[i];e[i]=mr(a,e[i])}return e}function lr(h,e,t){const{pointPositionsCount:i,pointFeaturesCount:a,linePositionsCount:s,linePathsCount:o,lineFeaturesCount:n,polygonPositionsCount:u,polygonObjectsCount:d,polygonRingsCount:y,polygonFeaturesCount:b,propArrayTypes:w,coordLength:c}=e,{numericPropKeys:m=[],PositionDataType:f=Float32Array,triangulate:g=!0}=t,p=h[0]&&"id"in h[0],k=h.length>65535?Uint32Array:Uint16Array,x={type:"Point",positions:new f(i*c),globalFeatureIds:new k(i),featureIds:a>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},C={type:"LineString",pathIndices:s>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new f(s*c),globalFeatureIds:new k(s),featureIds:n>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},S={type:"Polygon",polygonIndices:u>65535?new Uint32Array(d+1):new Uint16Array(d+1),primitivePolygonIndices:u>65535?new Uint32Array(y+1):new Uint16Array(y+1),positions:new f(u*c),globalFeatureIds:new k(u),featureIds:b>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]};g&&(S.triangles=[]);for(const R of[x,C,S])for(const T of m){const B=w[T];R.numericProps[T]=new B(R.positions.length/c)}C.pathIndices[o]=s,S.polygonIndices[d]=u,S.primitivePolygonIndices[y]=u;const L={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const R of h){const T=R.geometry,B=R.properties||{};switch(T.type){case"Point":ur(T,x,L,c,B),x.properties.push(Mt(B,m)),p&&x.fields.push({id:R.id}),L.pointFeature++;break;case"LineString":cr(T,C,L,c,B),C.properties.push(Mt(B,m)),p&&C.fields.push({id:R.id}),L.lineFeature++;break;case"Polygon":fr(T,S,L,c,B),S.properties.push(Mt(B,m)),p&&S.fields.push({id:R.id}),L.polygonFeature++;break;default:throw new Error("Invalid geometry type")}L.feature++}return pr(x,C,S,c)}function ur(h,e,t,i,a){e.positions.set(h.data,t.pointPosition*i);const s=h.data.length/i;Kt(e,a,t.pointPosition,s),e.globalFeatureIds.fill(t.feature,t.pointPosition,t.pointPosition+s),e.featureIds.fill(t.pointFeature,t.pointPosition,t.pointPosition+s),t.pointPosition+=s}function cr(h,e,t,i,a){e.positions.set(h.data,t.linePosition*i);const s=h.data.length/i;Kt(e,a,t.linePosition,s),e.globalFeatureIds.fill(t.feature,t.linePosition,t.linePosition+s),e.featureIds.fill(t.lineFeature,t.linePosition,t.linePosition+s);for(let o=0,n=h.indices.length;o<n;++o){const u=h.indices[o],d=o===n-1?h.data.length:h.indices[o+1];e.pathIndices[t.linePath++]=t.linePosition,t.linePosition+=(d-u)/i}}function fr(h,e,t,i,a){e.positions.set(h.data,t.polygonPosition*i);const s=h.data.length/i;Kt(e,a,t.polygonPosition,s),e.globalFeatureIds.fill(t.feature,t.polygonPosition,t.polygonPosition+s),e.featureIds.fill(t.polygonFeature,t.polygonPosition,t.polygonPosition+s);for(let o=0,n=h.indices.length;o<n;++o){const u=t.polygonPosition;e.polygonIndices[t.polygonObject++]=u;const d=h.areas[o],y=h.indices[o],b=h.indices[o+1];for(let c=0,m=y.length;c<m;++c){const f=y[c],g=c===m-1?b===void 0?h.data.length:b[0]:y[c+1];e.primitivePolygonIndices[t.polygonRing++]=t.polygonPosition,t.polygonPosition+=(g-f)/i}const w=t.polygonPosition;dr(e,d,y,{startPosition:u,endPosition:w,coordLength:i})}}function dr(h,e,t,i){let{startPosition:a,endPosition:s,coordLength:o}=i;if(!h.triangles)return;const n=a*o,u=s*o,d=h.positions.subarray(n,u),y=t[0],b=t.slice(1).map(c=>(c-y)/o),w=He(d,b,o,e);for(let c=0,m=w.length;c<m;++c)h.triangles.push(a+w[c])}function Wt(h,e){const t={};for(const i in h)t[i]={value:h[i],size:e};return t}function pr(h,e,t,i){const a={shape:"binary-feature-collection",points:{...h,positions:{value:h.positions,size:i},globalFeatureIds:{value:h.globalFeatureIds,size:1},featureIds:{value:h.featureIds,size:1},numericProps:Wt(h.numericProps,1)},lines:{...e,positions:{value:e.positions,size:i},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:Wt(e.numericProps,1)},polygons:{...t,positions:{value:t.positions,size:i},polygonIndices:{value:t.polygonIndices,size:1},primitivePolygonIndices:{value:t.primitivePolygonIndices,size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:Wt(t.numericProps,1)}};return a.polygons&&t.triangles&&(a.polygons.triangles={value:new Uint32Array(t.triangles),size:1}),a}function Kt(h,e,t,i){for(const a in h.numericProps)if(a in e){const s=e[a];h.numericProps[a].fill(s,t,t+i)}}function Mt(h,e){const t={};for(const i in h)e.includes(i)||(t[i]=h[i]);return t}function mr(h,e){return e===Array||!Number.isFinite(h)?Array:e===Float64Array||Math.fround(h)!==h?Float64Array:Float32Array}function gr(h){let e=0,t=0,i=0,a=0,s=0,o=0,n=0,u=0,d=0;const y=new Set;for(const b of h){const w=b.geometry;switch(w.type){case"Point":t++,e++,y.add(w.coordinates.length);break;case"MultiPoint":t++,e+=w.coordinates.length;for(const m of w.coordinates)y.add(m.length);break;case"LineString":s++,i+=w.coordinates.length,a++;for(const m of w.coordinates)y.add(m.length);break;case"MultiLineString":s++;for(const m of w.coordinates){i+=m.length,a++;for(const f of m)y.add(f.length)}break;case"Polygon":d++,n++,u+=w.coordinates.length;const c=w.coordinates.flat();o+=c.length;for(const m of c)y.add(m.length);break;case"MultiPolygon":d++;for(const m of w.coordinates){n++,u+=m.length;const f=m.flat();o+=f.length;for(const g of f)y.add(g.length)}break;default:throw new Error(`Unsupported geometry type: ${w.type}`)}}return{coordLength:y.size>0?Math.max(...y):2,pointPositionsCount:e,pointFeaturesCount:t,linePositionsCount:i,linePathsCount:a,lineFeaturesCount:s,polygonPositionsCount:o,polygonObjectsCount:n,polygonRingsCount:u,polygonFeaturesCount:d}}function _r(h){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{coordLength:2,fixRingWinding:!0};return h.map(t=>yr(t,e))}function ie(h,e,t,i){t.push(e.length),e.push(...h);for(let a=h.length;a<i.coordLength;a++)e.push(0)}function Jt(h,e,t,i){t.push(e.length);for(const a of h){e.push(...a);for(let s=a.length;s<i.coordLength;s++)e.push(0)}}function se(h,e,t,i,a){let s=0;const o=[],n=[];for(const u of h){const d=u.map(w=>w.slice(0,2));let y=he(d.flat());const b=y<0;a.fixRingWinding&&(s===0&&!b||s>0&&b)&&(u.reverse(),y=-y),o.push(y),Jt(u,e,n,a),s++}s>0&&(i.push(o),t.push(n))}function yr(h,e){const{geometry:t}=h;if(t.type==="GeometryCollection")throw new Error("GeometryCollection type not supported");const i=[],a=[];let s,o;switch(t.type){case"Point":o="Point",ie(t.coordinates,i,a,e);break;case"MultiPoint":o="Point",t.coordinates.map(n=>ie(n,i,a,e));break;case"LineString":o="LineString",Jt(t.coordinates,i,a,e);break;case"MultiLineString":o="LineString",t.coordinates.map(n=>Jt(n,i,a,e));break;case"Polygon":o="Polygon",s=[],se(t.coordinates,i,a,s,e);break;case"MultiPolygon":o="Polygon",s=[],t.coordinates.map(n=>se(n,i,a,s,e));break;default:throw new Error(`Unknown type: ${o}`)}return{...h,geometry:{type:o,indices:a,data:i,areas:s}}}function fe(h){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fixRingWinding:!0,triangulate:!0};const t=gr(h),i=t.coordLength,{fixRingWinding:a}=e,s=_r(h,{coordLength:i,fixRingWinding:a});return ar(s,t,{numericPropKeys:e.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array,triangulate:e.triangulate})}const br=typeof __VERSION__<"u"?__VERSION__:"latest",wr={name:"GeoJSON",id:"geojson",module:"geojson",version:br,worker:!0,extensions:["geojson"],mimeTypes:["application/geo+json"],category:"geometry",text:!0,options:{geojson:{shape:"object-row-table"},json:{shape:"object-row-table",jsonpaths:["$","$.features"]},gis:{format:"geojson"}}},Pt={...wr,parse:vr,parseTextSync:de,parseInBatches:kr};async function vr(h,e){return de(new TextDecoder().decode(h),e)}function de(h,e){var t;e={...Pt.options,...e},e.geojson={...Pt.options.geojson,...e.geojson},e.gis=e.gis||{};let i;try{i=JSON.parse(h)}catch{i={}}const a={shape:"geojson-table",type:"FeatureCollection",features:((t=i)===null||t===void 0?void 0:t.features)||[]};switch(e.gis.format){case"binary":return fe(a.features);default:return a}}function kr(h,e){e={...Pt.options,...e},e.json={...Pt.options.geojson,...e.geojson};const t=Ge(h,e);switch(e.gis.format){case"binary":return xr(t);default:return t}}async function*xr(h){for await(const e of h)e.data=fe(e.data),yield e}const oe={id:"geojson-layer",stroked:!0,filled:!0,pickable:!0,lineWidthMinPixels:1,opacity:.2,getFillColor:h=>h.properties.PTN_2015>100?[255,0,0]:h.properties.PTN_2015>50?[255,51,51]:h.properties.PTN_2015>10?[255,255,0]:h.properties.PTN_2015>5?[85,255,0]:[0,0,255],getLineColor:[0,0,0],getLineWidth:1};let vt;async function Er(){const{Map:h}=await google.maps.importLibrary("maps"),e=Cr(google);vt=new h(document.getElementById("map"),{center:{lat:37.1449038,lng:136.7898429},zoom:10,mapTypeId:"terrain"}),new google.maps.TrafficLayer().setMap(vt);const i=await Be("./data/pop_ishikawa.zip",Pt),a=d=>{const y=d.object.properties;document.getElementById("content").innerHTML=`<span>人口:約${Math.round(y.PTN_2015)}人</span><br><small>MESH_ID:${y.MESH_ID}</small>`,new e(new google.maps.LatLng(y.lat,y.lng),document.getElementById("content")).setMap(vt)},s=new Xt({...oe,data:i[0],onClick:a}),o=new xe({layers:[s]});o.setMap(vt);const n=document.getElementById("style-selector-control");vt.controls[google.maps.ControlPosition.TOP_CENTER].push(n);const u=document.getElementById("attribute");vt.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(u),document.getElementById("hide-layer").addEventListener("click",()=>{o.setProps({layers:[]})}),document.getElementById("show-layer").addEventListener("click",()=>{const d=new Xt({...oe,data:i[0],onClick:a});o.setProps({layers:[d]})})}Er();function Cr(h){class e extends h.maps.OverlayView{constructor(a,s){super();Zt(this,"position");Zt(this,"containerDiv");this.position=a,s.classList.add("popup-bubble");const o=document.createElement("div");o.classList.add("popup-bubble-anchor"),o.appendChild(s),this.containerDiv=document.createElement("div"),this.containerDiv.classList.add("popup-container"),this.containerDiv.appendChild(o),e.preventMapHitsAndGesturesFrom(this.containerDiv)}onAdd(){this.getPanes().floatPane.appendChild(this.containerDiv)}onRemove(){this.containerDiv.parentElement&&this.containerDiv.parentElement.removeChild(this.containerDiv)}draw(){const a=this.getProjection().fromLatLngToDivPixel(this.position),s=Math.abs(a.x)<4e3&&Math.abs(a.y)<4e3?"block":"none";s==="block"&&(this.containerDiv.style.left=a.x+"px",this.containerDiv.style.top=a.y+"px"),this.containerDiv.style.display!==s&&(this.containerDiv.style.display=s)}}return e}
